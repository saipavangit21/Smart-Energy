# StroomSlim v2 - Auth System - Full Auto Setup
# Run from your stroomslim folder:
#   powershell -ExecutionPolicy Bypass -File add-auth.ps1

Write-Host ""
Write-Host "=========================================" -ForegroundColor Cyan
Write-Host "  StroomSlim v2 - Adding Auth System" -ForegroundColor Cyan
Write-Host "=========================================" -ForegroundColor Cyan
Write-Host ""

# Helper: write file from base64
function WriteB64($path, $b64) {
  $dir = Split-Path $path -Parent
  if ($dir -and -not (Test-Path $dir)) { New-Item -ItemType Directory -Force -Path $dir | Out-Null }
  $bytes = [System.Convert]::FromBase64String($b64)
  [System.IO.File]::WriteAllBytes((Join-Path (Get-Location).Path $path), $bytes)
  Write-Host "  created: $path" -ForegroundColor Green
}

# Preserve existing ENTSOE_API_KEY if present
$existingEntsoe = ''
if (Test-Path 'backend\.env') {
  $envContent = Get-Content 'backend\.env' -Raw -ErrorAction SilentlyContinue
  if ($envContent -match 'ENTSOE_API_KEY=(.+)') { $existingEntsoe = $Matches[1].Trim() }
}

WriteB64 "backend\.env" "IyDilIDilIAgU2VydmVyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApQT1JUPTMwMDEKRlJPTlRFTkRfVVJMPWh0dHA6Ly9sb2NhbGhvc3Q6NTE3MwoKIyDilIDilIAgSldUIFNlY3JldHMgKENIQU5HRSBUSEVTRSBJTiBQUk9EVUNUSU9OISkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiMgR2VuZXJhdGUgc3Ryb25nIHNlY3JldHMgd2l0aDogbm9kZSAtZSAiY29uc29sZS5sb2cocmVxdWlyZSgnY3J5cHRvJykucmFuZG9tQnl0ZXMoNjQpLnRvU3RyaW5nKCdoZXgnKSkiCkpXVF9TRUNSRVQ9eW91cl9zdXBlcl9zZWNyZXRfand0X2tleV9jaGFuZ2VfdGhpc19pbl9wcm9kdWN0aW9uX21pbl8zMl9jaGFycwpKV1RfUkVGUkVTSF9TRUNSRVQ9eW91cl9yZWZyZXNoX3NlY3JldF9rZXlfY2hhbmdlX3RoaXNfdG9vX21pbl8zMl9jaGFycwpKV1RfRVhQSVJFU19JTj0xNW0KSldUX1JFRlJFU0hfRVhQSVJFU19JTj03ZAoKIyDilIDilIAgRW5lcmd5IEFQSXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACkVOVFNPRV9BUElfS0VZPQoKIyDilIDilIAgUGhhc2UgMjogR29vZ2xlIE9BdXRoIChhZGQgbGF0ZXIpIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAojIEdPT0dMRV9DTElFTlRfSUQ9CiMgR09PR0xFX0NMSUVOVF9TRUNSRVQ9CgojIOKUgOKUgCBQaGFzZSAzOiBpdHNtZSAoYWRkIGFmdGVyIHBhcnRuZXJzaGlwIGFwcHJvdmFsKSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKIyBJVFNNRV9DTElFTlRfSUQ9CiMgSVRTTUVfQ0xJRU5UX1NFQ1JFVD0KIyBJVFNNRV9SRURJUkVDVF9VUkk9aHR0cDovL2xvY2FsaG9zdDozMDAxL2F1dGgvaXRzbWUvY2FsbGJhY2sK"
WriteB64 "backend\db.js" "LyoqCiAqIGRiLmpzIOKAlCBJbi1NZW1vcnkgVXNlciBTdG9yZQogKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICogUGhhc2UgMTogc3RvcmVzIHVzZXJzIGluIG1lbW9yeSAocmVzZXRzIG9uIHNlcnZlciByZXN0YXJ0KQogKgogKiBUbyB1cGdyYWRlIHRvIGEgcmVhbCBkYXRhYmFzZSBsYXRlciwganVzdCByZXBsYWNlIHRoZQogKiB1c2VyU3RvcmUgbWV0aG9kcyB3aXRoIGNhbGxzIHRvIFBvc3RncmVTUUwgLyBNb25nb0RCLgogKiBUaGUgcmVzdCBvZiB0aGUgY29kZSBzdGF5cyB0aGUgc2FtZS4KICoKICogU3VnZ2VzdGVkIERCIHVwZ3JhZGUgcGF0aDoKICogICBucG0gaW5zdGFsbCBwZyAoUG9zdGdyZVNRTCkKICogICBvcgogKiAgIG5wbSBpbnN0YWxsIEBwcmlzbWEvY2xpZW50IChPUk0pCiAqLwoKY29uc3QgeyB2NDogdXVpZHY0IH0gPSByZXF1aXJlKCJ1dWlkIik7CgovLyBJbi1tZW1vcnkgc3RvcmVzCmNvbnN0IHVzZXJzID0gbmV3IE1hcCgpOyAgICAgICAgICAvLyB1c2VySWQg4oaSIHVzZXIgb2JqZWN0CmNvbnN0IHJlZnJlc2hUb2tlbnMgPSBuZXcgU2V0KCk7ICAvLyB2YWxpZCByZWZyZXNoIHRva2VucwoKY29uc3QgdXNlclN0b3JlID0gewogIC8vIOKUgOKUgCBDcmVhdGUg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgY3JlYXRlKHsgZW1haWwsIHBhc3N3b3JkSGFzaCwgbmFtZSB9KSB7CiAgICBjb25zdCBpZCA9IHV1aWR2NCgpOwogICAgY29uc3QgdXNlciA9IHsKICAgICAgaWQsCiAgICAgIGVtYWlsOiAgICAgICAgZW1haWwudG9Mb3dlckNhc2UoKS50cmltKCksCiAgICAgIHBhc3N3b3JkSGFzaCwKICAgICAgbmFtZTogICAgICAgICBuYW1lIHx8ICIiLAogICAgICBjcmVhdGVkQXQ6ICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKCiAgICAgIC8vIFVzZXIgcHJlZmVyZW5jZXMgKFBoYXNlIDEgZmVhdHVyZXMpCiAgICAgIHByZWZlcmVuY2VzOiB7CiAgICAgICAgc3VwcGxpZXI6ICAgICAgICAgIkJvbHQgRW5lcmd5IiwgICAvLyBkZWZhdWx0IHN1cHBsaWVyCiAgICAgICAgYWxlcnRUaHJlc2hvbGQ6ICAgODAsICAgICAgICAgICAgICAvLyDigqwvTVdoIGRlZmF1bHQgYWxlcnQKICAgICAgICBhbGVydEVuYWJsZWQ6ICAgICBmYWxzZSwKICAgICAgICBhbGVydENoYW5uZWxzOiAgICBbImFwcCJdLCAgICAgICAgIC8vIGFwcCB8IGVtYWlsIHwgc21zCiAgICAgICAgbGFuZ3VhZ2U6ICAgICAgICAgIm5sIiwgICAgICAgICAgICAvLyBubCB8IGZyIHwgZW4KICAgICAgfSwKCiAgICAgIC8vIExpbmtlZCBzZXJ2aWNlcyAoUGhhc2UgMi8zKQogICAgICBmbHV2aXVzOiB7CiAgICAgICAgbGlua2VkOiAgICBmYWxzZSwKICAgICAgICBlYW46ICAgICAgIG51bGwsCiAgICAgICAgbGlua2VkQXQ6ICBudWxsLAogICAgICB9LAoKICAgICAgLy8gQXV0aCBwcm92aWRlcnMgKFBoYXNlIDIvMyDigJQgcHJlLXN0cnVjdHVyZWQpCiAgICAgIHByb3ZpZGVyczogewogICAgICAgIGVtYWlsOiAgdHJ1ZSwKICAgICAgICBnb29nbGU6IGZhbHNlLAogICAgICAgIGFwcGxlOiAgZmFsc2UsCiAgICAgICAgaXRzbWU6ICBmYWxzZSwKICAgICAgfSwKICAgIH07CiAgICB1c2Vycy5zZXQoaWQsIHVzZXIpOwogICAgcmV0dXJuIHVzZXI7CiAgfSwKCiAgLy8g4pSA4pSAIFJlYWQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgZmluZEJ5SWQoaWQpIHsKICAgIHJldHVybiB1c2Vycy5nZXQoaWQpIHx8IG51bGw7CiAgfSwKCiAgZmluZEJ5RW1haWwoZW1haWwpIHsKICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBlbWFpbC50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgIGZvciAoY29uc3QgdXNlciBvZiB1c2Vycy52YWx1ZXMoKSkgewogICAgICBpZiAodXNlci5lbWFpbCA9PT0gbm9ybWFsaXplZCkgcmV0dXJuIHVzZXI7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9LAoKICAvLyDilIDilIAgVXBkYXRlIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHVwZGF0ZShpZCwgY2hhbmdlcykgewogICAgY29uc3QgdXNlciA9IHVzZXJzLmdldChpZCk7CiAgICBpZiAoIXVzZXIpIHJldHVybiBudWxsOwogICAgY29uc3QgdXBkYXRlZCA9IHsgLi4udXNlciwgLi4uY2hhbmdlcywgaWQgfTsgLy8gaWQgaXMgaW1tdXRhYmxlCiAgICB1c2Vycy5zZXQoaWQsIHVwZGF0ZWQpOwogICAgcmV0dXJuIHVwZGF0ZWQ7CiAgfSwKCiAgdXBkYXRlUHJlZmVyZW5jZXMoaWQsIHByZWZzKSB7CiAgICBjb25zdCB1c2VyID0gdXNlcnMuZ2V0KGlkKTsKICAgIGlmICghdXNlcikgcmV0dXJuIG51bGw7CiAgICBjb25zdCB1cGRhdGVkID0gewogICAgICAuLi51c2VyLAogICAgICBwcmVmZXJlbmNlczogeyAuLi51c2VyLnByZWZlcmVuY2VzLCAuLi5wcmVmcyB9LAogICAgfTsKICAgIHVzZXJzLnNldChpZCwgdXBkYXRlZCk7CiAgICByZXR1cm4gdXBkYXRlZDsKICB9LAoKICAvLyDilIDilIAgUmVmcmVzaCB0b2tlbnMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgc2F2ZVJlZnJlc2hUb2tlbih0b2tlbikgewogICAgcmVmcmVzaFRva2Vucy5hZGQodG9rZW4pOwogIH0sCgogIGlzVmFsaWRSZWZyZXNoVG9rZW4odG9rZW4pIHsKICAgIHJldHVybiByZWZyZXNoVG9rZW5zLmhhcyh0b2tlbik7CiAgfSwKCiAgZGVsZXRlUmVmcmVzaFRva2VuKHRva2VuKSB7CiAgICByZWZyZXNoVG9rZW5zLmRlbGV0ZSh0b2tlbik7CiAgfSwKCiAgLy8g4pSA4pSAIFNhZmUgdXNlciAobmV2ZXIgZXhwb3NlIHBhc3N3b3JkSGFzaCkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgc2FmZVVzZXIodXNlcikgewogICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDsKICAgIGNvbnN0IHsgcGFzc3dvcmRIYXNoLCAuLi5zYWZlIH0gPSB1c2VyOwogICAgcmV0dXJuIHNhZmU7CiAgfSwKCiAgY291bnQoKSB7CiAgICByZXR1cm4gdXNlcnMuc2l6ZTsKICB9LAp9OwoKbW9kdWxlLmV4cG9ydHMgPSB1c2VyU3RvcmU7Cg=="
WriteB64 "backend\middleware\auth.js" "LyoqCiAqIG1pZGRsZXdhcmUvYXV0aC5qcyDigJQgSldUIEF1dGhlbnRpY2F0aW9uIE1pZGRsZXdhcmUKICogUHJvdGVjdHMgcm91dGVzIHRoYXQgcmVxdWlyZSBhIGxvZ2dlZC1pbiB1c2VyCiAqLwoKY29uc3Qgand0ID0gcmVxdWlyZSgianNvbndlYnRva2VuIik7CmNvbnN0IHVzZXJTdG9yZSA9IHJlcXVpcmUoIi4uL2RiIik7CgpmdW5jdGlvbiByZXF1aXJlQXV0aChyZXEsIHJlcywgbmV4dCkgewogIHRyeSB7CiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjsKICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCJCZWFyZXIgIikpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiTm8gdG9rZW4gcHJvdmlkZWQiIH0pOwogICAgfQoKICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgiICIpWzFdOwogICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpOwoKICAgIC8vIEF0dGFjaCB1c2VyIHRvIHJlcXVlc3QKICAgIGNvbnN0IHVzZXIgPSB1c2VyU3RvcmUuZmluZEJ5SWQoZGVjb2RlZC51c2VySWQpOwogICAgaWYgKCF1c2VyKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIlVzZXIgbm90IGZvdW5kIiB9KTsKICAgIH0KCiAgICByZXEudXNlciA9IHVzZXJTdG9yZS5zYWZlVXNlcih1c2VyKTsKICAgIG5leHQoKTsKICB9IGNhdGNoIChlcnIpIHsKICAgIGlmIChlcnIubmFtZSA9PT0gIlRva2VuRXhwaXJlZEVycm9yIikgewogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICJUb2tlbiBleHBpcmVkIiwgY29kZTogIlRPS0VOX0VYUElSRUQiIH0pOwogICAgfQogICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiSW52YWxpZCB0b2tlbiIgfSk7CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsgcmVxdWlyZUF1dGggfTsK"
WriteB64 "backend\package.json" "ewogICJuYW1lIjogInN0cm9vbXNsaW0tYmFja2VuZCIsCiAgInZlcnNpb24iOiAiMi4wLjAiLAogICJkZXNjcmlwdGlvbiI6ICJCZWxnaXVtIHJlYWwtdGltZSBlbGVjdHJpY2l0eSBwcmljZSBwcm94eSArIGF1dGggQVBJIiwKICAibWFpbiI6ICJzZXJ2ZXIuanMiLAogICJzY3JpcHRzIjogewogICAgInN0YXJ0IjogIm5vZGUgc2VydmVyLmpzIiwKICAgICJkZXYiOiAibm9kZW1vbiBzZXJ2ZXIuanMiCiAgfSwKICAiZGVwZW5kZW5jaWVzIjogewogICAgImF4aW9zIjogIl4xLjYuNyIsCiAgICAiYmNyeXB0anMiOiAiXjIuNC4zIiwKICAgICJjb3JzIjogIl4yLjguNSIsCiAgICAiZG90ZW52IjogIl4xNi40LjEiLAogICAgImV4cHJlc3MiOiAiXjQuMTguMiIsCiAgICAiZXhwcmVzcy1yYXRlLWxpbWl0IjogIl43LjIuMCIsCiAgICAianNvbndlYnRva2VuIjogIl45LjAuMiIsCiAgICAibm9kZS1jYWNoZSI6ICJeNS4xLjIiLAogICAgInV1aWQiOiAiXjkuMC4xIgogIH0sCiAgImRldkRlcGVuZGVuY2llcyI6IHsKICAgICJub2RlbW9uIjogIl4zLjAuMyIKICB9Cn0K"
WriteB64 "backend\routes\auth.js" "LyoqCiAqIHJvdXRlcy9hdXRoLmpzIOKAlCBBdXRoZW50aWNhdGlvbiBSb3V0ZXMKICoKICogUE9TVCAvYXV0aC9yZWdpc3RlciAgICAg4oCUIENyZWF0ZSBhY2NvdW50CiAqIFBPU1QgL2F1dGgvbG9naW4gICAgICAgIOKAlCBMb2dpbiwgcmVjZWl2ZSB0b2tlbnMKICogUE9TVCAvYXV0aC9sb2dvdXQgICAgICAg4oCUIEludmFsaWRhdGUgcmVmcmVzaCB0b2tlbgogKiBQT1NUIC9hdXRoL3JlZnJlc2ggICAgICDigJQgR2V0IG5ldyBhY2Nlc3MgdG9rZW4KICogR0VUICAvYXV0aC9tZSAgICAgICAgICAg4oCUIEdldCBjdXJyZW50IHVzZXIgcHJvZmlsZQogKiBQVVQgIC9hdXRoL3ByZWZlcmVuY2VzICDigJQgVXBkYXRlIHN1cHBsaWVyLCBhbGVydHMsIGV0Yy4KICovCgpjb25zdCBleHByZXNzICA9IHJlcXVpcmUoImV4cHJlc3MiKTsKY29uc3QgYmNyeXB0ICAgPSByZXF1aXJlKCJiY3J5cHRqcyIpOwpjb25zdCBqd3QgICAgICA9IHJlcXVpcmUoImpzb253ZWJ0b2tlbiIpOwpjb25zdCByYXRlTGltaXQgPSByZXF1aXJlKCJleHByZXNzLXJhdGUtbGltaXQiKTsKY29uc3QgdXNlclN0b3JlID0gcmVxdWlyZSgiLi4vZGIiKTsKY29uc3QgeyByZXF1aXJlQXV0aCB9ID0gcmVxdWlyZSgiLi4vbWlkZGxld2FyZS9hdXRoIik7Cgpjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpOwoKLy8g4pSA4pSAIFJhdGUgbGltaXRpbmcgKHByZXZlbnRzIGJydXRlIGZvcmNlKSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKY29uc3QgbG9naW5MaW1pdGVyID0gcmF0ZUxpbWl0KHsKICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXMKICBtYXg6IDEwLAogIG1lc3NhZ2U6IHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiVG9vIG1hbnkgYXR0ZW1wdHMuIFRyeSBhZ2FpbiBpbiAxNSBtaW51dGVzLiIgfSwKfSk7Cgpjb25zdCByZWdpc3RlckxpbWl0ZXIgPSByYXRlTGltaXQoewogIHdpbmRvd01zOiA2MCAqIDYwICogMTAwMCwgLy8gMSBob3VyCiAgbWF4OiA1LAogIG1lc3NhZ2U6IHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiVG9vIG1hbnkgcmVnaXN0cmF0aW9ucyBmcm9tIHRoaXMgSVAuIiB9LAp9KTsKCi8vIOKUgOKUgCBUb2tlbiBoZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApmdW5jdGlvbiBnZW5lcmF0ZVRva2Vucyh1c2VySWQpIHsKICBjb25zdCBhY2Nlc3NUb2tlbiA9IGp3dC5zaWduKAogICAgeyB1c2VySWQgfSwKICAgIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsCiAgICB7IGV4cGlyZXNJbjogcHJvY2Vzcy5lbnYuSldUX0VYUElSRVNfSU4gfHwgIjE1bSIgfQogICk7CiAgY29uc3QgcmVmcmVzaFRva2VuID0gand0LnNpZ24oCiAgICB7IHVzZXJJZCB9LAogICAgcHJvY2Vzcy5lbnYuSldUX1JFRlJFU0hfU0VDUkVULAogICAgeyBleHBpcmVzSW46IHByb2Nlc3MuZW52LkpXVF9SRUZSRVNIX0VYUElSRVNfSU4gfHwgIjdkIiB9CiAgKTsKICByZXR1cm4geyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuIH07Cn0KCi8vIOKUgOKUgCBWYWxpZGF0aW9uIGhlbHBlcnMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmZ1bmN0aW9uIGlzVmFsaWRFbWFpbChlbWFpbCkgewogIHJldHVybiAvXlteXHNAXStAW15cc0BdK1wuW15cc0BdKyQvLnRlc3QoZW1haWwpOwp9CgpmdW5jdGlvbiBpc1N0cm9uZ1Bhc3N3b3JkKHBhc3N3b3JkKSB7CiAgcmV0dXJuIHBhc3N3b3JkICYmIHBhc3N3b3JkLmxlbmd0aCA+PSA4Owp9CgovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKLy8gUE9TVCAvYXV0aC9yZWdpc3RlcgovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKcm91dGVyLnBvc3QoIi9yZWdpc3RlciIsIHJlZ2lzdGVyTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBuYW1lIH0gPSByZXEuYm9keTsKCiAgICAvLyBWYWxpZGF0ZQogICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiRW1haWwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZCIgfSk7CiAgICB9CiAgICBpZiAoIWlzVmFsaWRFbWFpbChlbWFpbCkpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiSW52YWxpZCBlbWFpbCBhZGRyZXNzIiB9KTsKICAgIH0KICAgIGlmICghaXNTdHJvbmdQYXNzd29yZChwYXNzd29yZCkpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMiIH0pOwogICAgfQoKICAgIC8vIENoZWNrIGR1cGxpY2F0ZQogICAgaWYgKHVzZXJTdG9yZS5maW5kQnlFbWFpbChlbWFpbCkpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiQW4gYWNjb3VudCB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHMiIH0pOwogICAgfQoKICAgIC8vIEhhc2ggcGFzc3dvcmQKICAgIGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMik7CgogICAgLy8gQ3JlYXRlIHVzZXIKICAgIGNvbnN0IHVzZXIgPSB1c2VyU3RvcmUuY3JlYXRlKHsgZW1haWwsIHBhc3N3b3JkSGFzaCwgbmFtZSB9KTsKCiAgICAvLyBHZW5lcmF0ZSB0b2tlbnMKICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiB9ID0gZ2VuZXJhdGVUb2tlbnModXNlci5pZCk7CiAgICB1c2VyU3RvcmUuc2F2ZVJlZnJlc2hUb2tlbihyZWZyZXNoVG9rZW4pOwoKICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsKICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgbWVzc2FnZTogIkFjY291bnQgY3JlYXRlZCBzdWNjZXNzZnVsbHkiLAogICAgICB1c2VyOiB1c2VyU3RvcmUuc2FmZVVzZXIodXNlciksCiAgICAgIGFjY2Vzc1Rva2VuLAogICAgICByZWZyZXNoVG9rZW4sCiAgICB9KTsKICB9IGNhdGNoIChlcnIpIHsKICAgIGNvbnNvbGUuZXJyb3IoIlJlZ2lzdGVyIGVycm9yOiIsIGVycik7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIlJlZ2lzdHJhdGlvbiBmYWlsZWQiIH0pOwogIH0KfSk7CgovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKLy8gUE9TVCAvYXV0aC9sb2dpbgovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKcm91dGVyLnBvc3QoIi9sb2dpbiIsIGxvZ2luTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTsKCiAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkgewogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICJFbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkIiB9KTsKICAgIH0KCiAgICAvLyBGaW5kIHVzZXIKICAgIGNvbnN0IHVzZXIgPSB1c2VyU3RvcmUuZmluZEJ5RW1haWwoZW1haWwpOwogICAgaWYgKCF1c2VyKSB7CiAgICAgIC8vIEdlbmVyaWMgbWVzc2FnZSB0byBwcmV2ZW50IHVzZXIgZW51bWVyYXRpb24KICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCIgfSk7CiAgICB9CgogICAgLy8gQ2hlY2sgcGFzc3dvcmQKICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZEhhc2gpOwogICAgaWYgKCFpc1ZhbGlkKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQiIH0pOwogICAgfQoKICAgIC8vIEdlbmVyYXRlIHRva2VucwogICAgY29uc3QgeyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuIH0gPSBnZW5lcmF0ZVRva2Vucyh1c2VyLmlkKTsKICAgIHVzZXJTdG9yZS5zYXZlUmVmcmVzaFRva2VuKHJlZnJlc2hUb2tlbik7CgogICAgcmVzLmpzb24oewogICAgICBzdWNjZXNzOiB0cnVlLAogICAgICBtZXNzYWdlOiAiTG9naW4gc3VjY2Vzc2Z1bCIsCiAgICAgIHVzZXI6IHVzZXJTdG9yZS5zYWZlVXNlcih1c2VyKSwKICAgICAgYWNjZXNzVG9rZW4sCiAgICAgIHJlZnJlc2hUb2tlbiwKICAgIH0pOwogIH0gY2F0Y2ggKGVycikgewogICAgY29uc29sZS5lcnJvcigiTG9naW4gZXJyb3I6IiwgZXJyKTsKICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiTG9naW4gZmFpbGVkIiB9KTsKICB9Cn0pOwoKLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACi8vIFBPU1QgL2F1dGgvcmVmcmVzaAovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKcm91dGVyLnBvc3QoIi9yZWZyZXNoIiwgKHJlcSwgcmVzKSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuIH0gPSByZXEuYm9keTsKICAgIGlmICghcmVmcmVzaFRva2VuKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIlJlZnJlc2ggdG9rZW4gcmVxdWlyZWQiIH0pOwogICAgfQogICAgaWYgKCF1c2VyU3RvcmUuaXNWYWxpZFJlZnJlc2hUb2tlbihyZWZyZXNoVG9rZW4pKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIkludmFsaWQgcmVmcmVzaCB0b2tlbiIgfSk7CiAgICB9CgogICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkocmVmcmVzaFRva2VuLCBwcm9jZXNzLmVudi5KV1RfUkVGUkVTSF9TRUNSRVQpOwogICAgY29uc3QgdXNlciA9IHVzZXJTdG9yZS5maW5kQnlJZChkZWNvZGVkLnVzZXJJZCk7CiAgICBpZiAoIXVzZXIpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiVXNlciBub3QgZm91bmQiIH0pOwogICAgfQoKICAgIC8vIFJvdGF0ZSByZWZyZXNoIHRva2VuIChzZWN1cml0eSBiZXN0IHByYWN0aWNlKQogICAgdXNlclN0b3JlLmRlbGV0ZVJlZnJlc2hUb2tlbihyZWZyZXNoVG9rZW4pOwogICAgY29uc3QgeyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuOiBuZXdSZWZyZXNoVG9rZW4gfSA9IGdlbmVyYXRlVG9rZW5zKHVzZXIuaWQpOwogICAgdXNlclN0b3JlLnNhdmVSZWZyZXNoVG9rZW4obmV3UmVmcmVzaFRva2VuKTsKCiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW46IG5ld1JlZnJlc2hUb2tlbiB9KTsKICB9IGNhdGNoIChlcnIpIHsKICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiSW52YWxpZCBvciBleHBpcmVkIHJlZnJlc2ggdG9rZW4iIH0pOwogIH0KfSk7CgovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKLy8gUE9TVCAvYXV0aC9sb2dvdXQKLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACnJvdXRlci5wb3N0KCIvbG9nb3V0IiwgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgeyByZWZyZXNoVG9rZW4gfSA9IHJlcS5ib2R5OwogIGlmIChyZWZyZXNoVG9rZW4pIHsKICAgIHVzZXJTdG9yZS5kZWxldGVSZWZyZXNoVG9rZW4ocmVmcmVzaFRva2VuKTsKICB9CiAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAiTG9nZ2VkIG91dCBzdWNjZXNzZnVsbHkiIH0pOwp9KTsKCi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAovLyBHRVQgL2F1dGgvbWUg4oCUIEdldCBjdXJyZW50IHVzZXIKLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACnJvdXRlci5nZXQoIi9tZSIsIHJlcXVpcmVBdXRoLCAocmVxLCByZXMpID0+IHsKICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIHVzZXI6IHJlcS51c2VyIH0pOwp9KTsKCi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAovLyBQVVQgL2F1dGgvcHJlZmVyZW5jZXMg4oCUIFNhdmUgdXNlciBwcmVmZXJlbmNlcwovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKcm91dGVyLnB1dCgiL3ByZWZlcmVuY2VzIiwgcmVxdWlyZUF1dGgsIChyZXEsIHJlcykgPT4gewogIHRyeSB7CiAgICBjb25zdCBhbGxvd2VkID0gWyJzdXBwbGllciIsICJhbGVydFRocmVzaG9sZCIsICJhbGVydEVuYWJsZWQiLCAiYWxlcnRDaGFubmVscyIsICJsYW5ndWFnZSJdOwogICAgY29uc3QgdXBkYXRlcyA9IHt9OwogICAgZm9yIChjb25zdCBrZXkgb2YgYWxsb3dlZCkgewogICAgICBpZiAocmVxLmJvZHlba2V5XSAhPT0gdW5kZWZpbmVkKSB1cGRhdGVzW2tleV0gPSByZXEuYm9keVtrZXldOwogICAgfQoKICAgIGNvbnN0IHVwZGF0ZWQgPSB1c2VyU3RvcmUudXBkYXRlUHJlZmVyZW5jZXMocmVxLnVzZXIuaWQsIHVwZGF0ZXMpOwogICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBwcmVmZXJlbmNlczogdXBkYXRlZC5wcmVmZXJlbmNlcyB9KTsKICB9IGNhdGNoIChlcnIpIHsKICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiRmFpbGVkIHRvIHVwZGF0ZSBwcmVmZXJlbmNlcyIgfSk7CiAgfQp9KTsKCi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAovLyBQVVQgL2F1dGgvcHJvZmlsZSDigJQgVXBkYXRlIG5hbWUgLyBlbWFpbAovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKcm91dGVyLnB1dCgiL3Byb2ZpbGUiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IHsgbmFtZSwgZW1haWwgfSA9IHJlcS5ib2R5OwogICAgY29uc3QgY2hhbmdlcyA9IHt9OwoKICAgIGlmIChuYW1lKSBjaGFuZ2VzLm5hbWUgPSBuYW1lOwogICAgaWYgKGVtYWlsKSB7CiAgICAgIGlmICghaXNWYWxpZEVtYWlsKGVtYWlsKSkgewogICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIkludmFsaWQgZW1haWwiIH0pOwogICAgICB9CiAgICAgIGNvbnN0IGV4aXN0aW5nID0gdXNlclN0b3JlLmZpbmRCeUVtYWlsKGVtYWlsKTsKICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLmlkICE9PSByZXEudXNlci5pZCkgewogICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIkVtYWlsIGFscmVhZHkgaW4gdXNlIiB9KTsKICAgICAgfQogICAgICBjaGFuZ2VzLmVtYWlsID0gZW1haWwudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICB9CgogICAgY29uc3QgdXBkYXRlZCA9IHVzZXJTdG9yZS51cGRhdGUocmVxLnVzZXIuaWQsIGNoYW5nZXMpOwogICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCB1c2VyOiB1c2VyU3RvcmUuc2FmZVVzZXIodXBkYXRlZCkgfSk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIkZhaWxlZCB0byB1cGRhdGUgcHJvZmlsZSIgfSk7CiAgfQp9KTsKCi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAovLyBQVVQgL2F1dGgvY2hhbmdlLXBhc3N3b3JkCi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApyb3V0ZXIucHV0KCIvY2hhbmdlLXBhc3N3b3JkIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIHRyeSB7CiAgICBjb25zdCB7IGN1cnJlbnRQYXNzd29yZCwgbmV3UGFzc3dvcmQgfSA9IHJlcS5ib2R5OwogICAgaWYgKCFjdXJyZW50UGFzc3dvcmQgfHwgIW5ld1Bhc3N3b3JkKSB7CiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogIkJvdGggcGFzc3dvcmRzIHJlcXVpcmVkIiB9KTsKICAgIH0KICAgIGlmICghaXNTdHJvbmdQYXNzd29yZChuZXdQYXNzd29yZCkpIHsKICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAiTmV3IHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzIiB9KTsKICAgIH0KCiAgICBjb25zdCB1c2VyID0gdXNlclN0b3JlLmZpbmRCeUlkKHJlcS51c2VyLmlkKTsKICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShjdXJyZW50UGFzc3dvcmQsIHVzZXIucGFzc3dvcmRIYXNoKTsKICAgIGlmICghaXNWYWxpZCkgewogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICJDdXJyZW50IHBhc3N3b3JkIGlzIGluY29ycmVjdCIgfSk7CiAgICB9CgogICAgY29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gobmV3UGFzc3dvcmQsIDEyKTsKICAgIHVzZXJTdG9yZS51cGRhdGUocmVxLnVzZXIuaWQsIHsgcGFzc3dvcmRIYXNoIH0pOwogICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAiUGFzc3dvcmQgY2hhbmdlZCBzdWNjZXNzZnVsbHkiIH0pOwogIH0gY2F0Y2ggKGVycikgewogICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICJGYWlsZWQgdG8gY2hhbmdlIHBhc3N3b3JkIiB9KTsKICB9Cn0pOwoKbW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Cg=="
WriteB64 "backend\server.js" "LyoqCiAqIFN0cm9vbVNsaW0gQmFja2VuZCB2MiDigJQgd2l0aCBBdXRoZW50aWNhdGlvbgogKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICogUm91dGVzOgogKiAgIC9hdXRoLyogICAgICAgICDihpIgcmVnaXN0ZXIsIGxvZ2luLCBsb2dvdXQsIHJlZnJlc2gsIHByb2ZpbGUKICogICAvYXBpL3ByaWNlcy8qICAg4oaSIHJlYWwtdGltZSBFUEVYIFNwb3QgQmVsZ2l1bSBwcmljZXMKICogICAvYXBpL2N1cnJlbnQgICAg4oaSIGxpdmUgY3VycmVudCBob3VyIHByaWNlCiAqICAgL2FwaS9jaGVhcGVzdCAgIOKGkiBjaGVhcGVzdCB1cGNvbWluZyBob3VycwogKiAgIC9hcGkvaGVhbHRoICAgICDihpIgc2VydmVyIGhlYWx0aCBjaGVjawogKi8KCmNvbnN0IGV4cHJlc3MgICA9IHJlcXVpcmUoImV4cHJlc3MiKTsKY29uc3QgY29ycyAgICAgID0gcmVxdWlyZSgiY29ycyIpOwpjb25zdCBOb2RlQ2FjaGUgPSByZXF1aXJlKCJub2RlLWNhY2hlIik7CmNvbnN0IGF4aW9zICAgICA9IHJlcXVpcmUoImF4aW9zIik7CnJlcXVpcmUoImRvdGVudiIpLmNvbmZpZygpOwoKY29uc3QgYXV0aFJvdXRlcyAgID0gcmVxdWlyZSgiLi9yb3V0ZXMvYXV0aCIpOwpjb25zdCB7IHJlcXVpcmVBdXRoIH0gPSByZXF1aXJlKCIuL21pZGRsZXdhcmUvYXV0aCIpOwoKY29uc3QgYXBwICA9IGV4cHJlc3MoKTsKY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMTsKY29uc3QgY2FjaGUgPSBuZXcgTm9kZUNhY2hlKHsgc3RkVFRMOiA5MDAsIGNoZWNrcGVyaW9kOiA2MCB9KTsKCi8vIOKUgOKUgCBNaWRkbGV3YXJlIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAphcHAudXNlKGNvcnMoeyBvcmlnaW46IHByb2Nlc3MuZW52LkZST05URU5EX1VSTCB8fCAiKiIsIGNyZWRlbnRpYWxzOiB0cnVlIH0pKTsKYXBwLnVzZShleHByZXNzLmpzb24oKSk7CgovLyDilIDilIAgQXV0aCBSb3V0ZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmFwcC51c2UoIi9hdXRoIiwgYXV0aFJvdXRlcyk7CgovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKLy8gUFJJQ0UgQVBJIEhFTFBFUlMKLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpmdW5jdGlvbiB0b0lTT0RhdGUoZCkgeyByZXR1cm4gZC50b0lTT1N0cmluZygpLnNwbGl0KCJUIilbMF07IH0KCmZ1bmN0aW9uIHRvZGF5QW5kVG9tb3Jyb3coKSB7CiAgY29uc3QgdG9kYXkgICAgPSBuZXcgRGF0ZSgpOwogIGNvbnN0IHRvbW9ycm93ID0gbmV3IERhdGUodG9kYXkpOwogIHRvbW9ycm93LnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMSk7CiAgcmV0dXJuIHsgdG9kYXk6IHRvSVNPRGF0ZSh0b2RheSksIHRvbW9ycm93OiB0b0lTT0RhdGUodG9tb3Jyb3cpIH07Cn0KCmZ1bmN0aW9uIGdldFByaWNlQ2F0ZWdvcnkobXdoKSB7CiAgaWYgKG13aCA8IDApICAgcmV0dXJuICJuZWdhdGl2ZSI7CiAgaWYgKG13aCA8IDUwKSAgcmV0dXJuICJ2ZXJ5X2NoZWFwIjsKICBpZiAobXdoIDwgOTApICByZXR1cm4gImNoZWFwIjsKICBpZiAobXdoIDwgMTMwKSByZXR1cm4gIm1vZGVyYXRlIjsKICBpZiAobXdoIDwgMTYwKSByZXR1cm4gImV4cGVuc2l2ZSI7CiAgcmV0dXJuICJwZWFrIjsKfQoKZnVuY3Rpb24gY29tcHV0ZVN0YXRzKHByaWNlcykgewogIGNvbnN0IGNhbGMgPSAoYXJyKSA9PiB7CiAgICBpZiAoIWFyci5sZW5ndGgpIHJldHVybiBudWxsOwogICAgY29uc3QgdmFscyA9IGFyci5tYXAocCA9PiBwLnByaWNlX2V1cl9td2gpOwogICAgcmV0dXJuIHsKICAgICAgbWluOiBNYXRoLm1pbiguLi52YWxzKSwKICAgICAgbWF4OiBNYXRoLm1heCguLi52YWxzKSwKICAgICAgYXZnOiArKHZhbHMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyB2YWxzLmxlbmd0aCkudG9GaXhlZCgyKSwKICAgICAgbmVnYXRpdmVfaG91cnM6IGFyci5maWx0ZXIocCA9PiBwLnByaWNlX2V1cl9td2ggPCAwKS5sZW5ndGgsCiAgICB9OwogIH07CiAgcmV0dXJuIHsKICAgIHRvZGF5OiAgICBjYWxjKHByaWNlcy5maWx0ZXIocCA9PiBwLmRheSA9PT0gInRvZGF5IikpLAogICAgdG9tb3Jyb3c6IGNhbGMocHJpY2VzLmZpbHRlcihwID0+IHAuZGF5ID09PSAidG9tb3Jyb3ciKSksCiAgfTsKfQoKYXN5bmMgZnVuY3Rpb24gZmV0Y2hFbmVyZ3lDaGFydHNQcmljZXMoc3RhcnREYXRlLCBlbmREYXRlKSB7CiAgY29uc3Qga2V5ID0gYGVjLSR7c3RhcnREYXRlfS0ke2VuZERhdGV9YDsKICBpZiAoY2FjaGUuaGFzKGtleSkpIHJldHVybiBjYWNoZS5nZXQoa2V5KTsKICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZW5lcmd5LWNoYXJ0cy5pbmZvL3ByaWNlP2J6bj1CRSZzdGFydD0ke3N0YXJ0RGF0ZX0mZW5kPSR7ZW5kRGF0ZX1gOwogIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MuZ2V0KHVybCwgeyB0aW1lb3V0OiAxMDAwMCB9KTsKICBjb25zdCBwcmljZXMgPSBkYXRhLnVuaXhfc2Vjb25kcy5tYXAoKHRzLCBpKSA9PiAoewogICAgdGltZXN0YW1wOiAgICAgbmV3IERhdGUodHMgKiAxMDAwKS50b0lTT1N0cmluZygpLAogICAgcHJpY2VfZXVyX213aDogZGF0YS5wcmljZVtpXSwKICAgIHByaWNlX2V1cl9rd2g6ICsoZGF0YS5wcmljZVtpXSAvIDEwMDApLnRvRml4ZWQoNiksCiAgICBzb3VyY2U6ICAgICAgICAiRW5lcmd5LUNoYXJ0cyAvIEVQRVggU3BvdCAoRnJhdW5ob2ZlciBJU0UpIiwKICB9KSk7CiAgY2FjaGUuc2V0KGtleSwgcHJpY2VzKTsKICByZXR1cm4gcHJpY2VzOwp9Cgphc3luYyBmdW5jdGlvbiBmZXRjaEVsaWFQcmljZXMoc3RhcnREYXRlLCBlbmREYXRlKSB7CiAgY29uc3Qga2V5ID0gYGVsaWEtJHtzdGFydERhdGV9LSR7ZW5kRGF0ZX1gOwogIGlmIChjYWNoZS5oYXMoa2V5KSkgcmV0dXJuIGNhY2hlLmdldChrZXkpOwogIGNvbnN0IHVybCA9ICJodHRwczovL29wZW5kYXRhLmVsaWEuYmUvYXBpL2V4cGxvcmUvdjIuMS9jYXRhbG9nL2RhdGFzZXRzL29kczAwMy9yZWNvcmRzIjsKICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldCh1cmwsIHsKICAgIHRpbWVvdXQ6IDEwMDAwLAogICAgcGFyYW1zOiB7CiAgICAgIGxpbWl0OiAxMDAsIG9yZGVyX2J5OiAiZGF0ZXRpbWUiLAogICAgICB3aGVyZTogYGRhdGV0aW1lID49ICIke3N0YXJ0RGF0ZX1UMDA6MDA6MDAiIEFORCBkYXRldGltZSA8PSAiJHtlbmREYXRlfVQyMzo1OTo1OSJgLAogICAgfSwKICB9KTsKICBjb25zdCBwcmljZXMgPSAoZGF0YS5yZXN1bHRzIHx8IFtdKS5tYXAociA9PiAoewogICAgdGltZXN0YW1wOiAgICAgci5kYXRldGltZSwKICAgIHByaWNlX2V1cl9td2g6IHIucHJpY2UsCiAgICBwcmljZV9ldXJfa3doOiArKHIucHJpY2UgLyAxMDAwKS50b0ZpeGVkKDYpLAogICAgc291cmNlOiAgICAgICAgIkVsaWEgT3BlbiBEYXRhIChDQyBCWSA0LjApIiwKICB9KSk7CiAgY2FjaGUuc2V0KGtleSwgcHJpY2VzKTsKICByZXR1cm4gcHJpY2VzOwp9CgpmdW5jdGlvbiBlbnJpY2hQcmljZXMocHJpY2VzKSB7CiAgY29uc3Qgbm93ICAgICA9IG5ldyBEYXRlKCk7CiAgY29uc3QgdG9kYXlTdHIgPSB0b0lTT0RhdGUobm93KTsKICByZXR1cm4gcHJpY2VzLm1hcChwID0+IHsKICAgIGNvbnN0IHRzID0gbmV3IERhdGUocC50aW1lc3RhbXApOwogICAgY29uc3QgaXNUb2RheSA9IHRvSVNPRGF0ZSh0cykgPT09IHRvZGF5U3RyOwogICAgcmV0dXJuIHsKICAgICAgLi4ucCwKICAgICAgZGF5OiAgICAgICAgICAgIGlzVG9kYXkgPyAidG9kYXkiIDogInRvbW9ycm93IiwKICAgICAgaG91cjogICAgICAgICAgIHRzLmdldEhvdXJzKCksCiAgICAgIGhvdXJfbGFiZWw6ICAgICBgJHt0cy5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgIjAiKX06MDBgLAogICAgICBpc19jdXJyZW50OiAgICAgaXNUb2RheSAmJiB0cy5nZXRIb3VycygpID09PSBub3cuZ2V0SG91cnMoKSwKICAgICAgaXNfbmVnYXRpdmU6ICAgIHAucHJpY2VfZXVyX213aCA8IDAsCiAgICAgIHByaWNlX2NhdGVnb3J5OiBnZXRQcmljZUNhdGVnb3J5KHAucHJpY2VfZXVyX213aCksCiAgICB9OwogIH0pOwp9Cgphc3luYyBmdW5jdGlvbiBnZXRQcmljZXMoc3RhcnREYXRlLCBlbmREYXRlKSB7CiAgdHJ5IHsKICAgIHJldHVybiB7IHByaWNlczogYXdhaXQgZmV0Y2hFbmVyZ3lDaGFydHNQcmljZXMoc3RhcnREYXRlLCBlbmREYXRlKSwgc291cmNlOiAiRW5lcmd5LUNoYXJ0cyIgfTsKICB9IGNhdGNoIChlMSkgewogICAgY29uc29sZS53YXJuKCJFbmVyZ3ktQ2hhcnRzIGZhaWxlZDoiLCBlMS5tZXNzYWdlKTsKICAgIHRyeSB7CiAgICAgIHJldHVybiB7IHByaWNlczogYXdhaXQgZmV0Y2hFbGlhUHJpY2VzKHN0YXJ0RGF0ZSwgZW5kRGF0ZSksIHNvdXJjZTogIkVsaWEgT3BlbiBEYXRhIiB9OwogICAgfSBjYXRjaCAoZTIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBCb3RoIHNvdXJjZXMgZmFpbGVkLiBFQzogJHtlMS5tZXNzYWdlfSB8IEVsaWE6ICR7ZTIubWVzc2FnZX1gKTsKICAgIH0KICB9Cn0KCi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAovLyBQUklDRSBST1VURVMgKHB1YmxpYyDigJQgbm8gYXV0aCBuZWVkZWQpCi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKYXBwLmdldCgiL2FwaS9oZWFsdGgiLCAocmVxLCByZXMpID0+IHsKICByZXMuanNvbih7CiAgICBzdGF0dXM6ICJvayIsCiAgICB1cHRpbWU6IE1hdGgucm91bmQocHJvY2Vzcy51cHRpbWUoKSksCiAgICBjYWNoZV9rZXlzOiBjYWNoZS5rZXlzKCkubGVuZ3RoLAogICAgZW50c29lX2NvbmZpZ3VyZWQ6ICEhcHJvY2Vzcy5lbnYuRU5UU09FX0FQSV9LRVksCiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICB9KTsKfSk7CgphcHAuZ2V0KCIvYXBpL3ByaWNlcy90b2RheSIsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIHRyeSB7CiAgICBjb25zdCB7IHRvZGF5LCB0b21vcnJvdyB9ID0gdG9kYXlBbmRUb21vcnJvdygpOwogICAgY29uc3QgeyBwcmljZXMsIHNvdXJjZSB9ID0gYXdhaXQgZ2V0UHJpY2VzKHRvZGF5LCB0b21vcnJvdyk7CiAgICBjb25zdCBlbnJpY2hlZCA9IGVucmljaFByaWNlcyhwcmljZXMpOwogICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBmZXRjaGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIHNvdXJjZSwgZGF0YTogZW5yaWNoZWQsIHN0YXRzOiBjb21wdXRlU3RhdHMoZW5yaWNoZWQpIH0pOwogIH0gY2F0Y2ggKGVycikgewogICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVyci5tZXNzYWdlIH0pOwogIH0KfSk7CgphcHAuZ2V0KCIvYXBpL2N1cnJlbnQiLCBhc3luYyAocmVxLCByZXMpID0+IHsKICB0cnkgewogICAgY29uc3QgeyB0b2RheSB9ID0gdG9kYXlBbmRUb21vcnJvdygpOwogICAgY29uc3QgeyBwcmljZXMgfSA9IGF3YWl0IGdldFByaWNlcyh0b2RheSwgdG9kYXkpOwogICAgY29uc3QgaG91ciA9IG5ldyBEYXRlKCkuZ2V0SG91cnMoKTsKICAgIGNvbnN0IGN1cnJlbnQgPSBwcmljZXMuZmluZChwID0+IG5ldyBEYXRlKHAudGltZXN0YW1wKS5nZXRIb3VycygpID09PSBob3VyKSB8fCBwcmljZXNbcHJpY2VzLmxlbmd0aCAtIDFdOwogICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBjdXJyZW50LCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KTsKICB9IGNhdGNoIChlcnIpIHsKICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnIubWVzc2FnZSB9KTsKICB9Cn0pOwoKYXBwLmdldCgiL2FwaS9jaGVhcGVzdCIsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIHRyeSB7CiAgICBjb25zdCBuID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmhvdXJzIHx8ICI1Iik7CiAgICBjb25zdCB7IHRvZGF5LCB0b21vcnJvdyB9ID0gdG9kYXlBbmRUb21vcnJvdygpOwogICAgY29uc3QgeyBwcmljZXMgfSA9IGF3YWl0IGdldFByaWNlcyh0b2RheSwgdG9tb3Jyb3cpOwogICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgIGNvbnN0IGNoZWFwZXN0ID0gWy4uLnByaWNlcy5maWx0ZXIocCA9PiBuZXcgRGF0ZShwLnRpbWVzdGFtcCkgPj0gbm93KV0KICAgICAgLnNvcnQoKGEsIGIpID0+IGEucHJpY2VfZXVyX213aCAtIGIucHJpY2VfZXVyX213aCkuc2xpY2UoMCwgbik7CiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNoZWFwZXN0X2hvdXJzOiBjaGVhcGVzdCB9KTsKICB9IGNhdGNoIChlcnIpIHsKICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnIubWVzc2FnZSB9KTsKICB9Cn0pOwoKLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACi8vIFVTRVItU1BFQ0lGSUMgUk9VVEVTIChhdXRoIHJlcXVpcmVkKQovLyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCi8vIEdFVCAvYXBpL3VzZXIvZGFzaGJvYXJkIOKAlCBwZXJzb25hbGlzZWQgZGF0YSBmb3IgbG9nZ2VkLWluIHVzZXIKYXBwLmdldCgiL2FwaS91c2VyL2Rhc2hib2FyZCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHsKICB0cnkgewogICAgY29uc3QgeyB0b2RheSwgdG9tb3Jyb3cgfSA9IHRvZGF5QW5kVG9tb3Jyb3coKTsKICAgIGNvbnN0IHsgcHJpY2VzLCBzb3VyY2UgfSA9IGF3YWl0IGdldFByaWNlcyh0b2RheSwgdG9tb3Jyb3cpOwogICAgY29uc3QgZW5yaWNoZWQgPSBlbnJpY2hQcmljZXMocHJpY2VzKTsKICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjsKCiAgICAvLyBBcHBseSB1c2VyJ3Mgc2F2ZWQgc3VwcGxpZXIgcHJlZmVyZW5jZSB0byBjdXJyZW50IHByaWNlCiAgICBjb25zdCBob3VyID0gbmV3IERhdGUoKS5nZXRIb3VycygpOwogICAgY29uc3QgY3VycmVudFJhdyA9IHByaWNlcy5maW5kKHAgPT4gbmV3IERhdGUocC50aW1lc3RhbXApLmdldEhvdXJzKCkgPT09IGhvdXIpOwoKICAgIHJlcy5qc29uKHsKICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgdXNlcjogewogICAgICAgIG5hbWU6ICAgICAgICB1c2VyLm5hbWUsCiAgICAgICAgcHJlZmVyZW5jZXM6IHVzZXIucHJlZmVyZW5jZXMsCiAgICAgIH0sCiAgICAgIHByaWNlczogICAgIGVucmljaGVkLAogICAgICBzdGF0czogICAgICBjb21wdXRlU3RhdHMoZW5yaWNoZWQpLAogICAgICBjdXJyZW50OiAgICBjdXJyZW50UmF3IHx8IG51bGwsCiAgICAgIHNvdXJjZSwKICAgIH0pOwogIH0gY2F0Y2ggKGVycikgewogICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVyci5tZXNzYWdlIH0pOwogIH0KfSk7CgovLyBHRVQgL2FwaS91c2VyL2FsZXJ0cyDigJQgZ2V0IHVzZXIncyBhbGVydCBjb25maWcKYXBwLmdldCgiL2FwaS91c2VyL2FsZXJ0cyIsIHJlcXVpcmVBdXRoLCAocmVxLCByZXMpID0+IHsKICByZXMuanNvbih7CiAgICBzdWNjZXNzOiB0cnVlLAogICAgYWxlcnRzOiB7CiAgICAgIHRocmVzaG9sZDogcmVxLnVzZXIucHJlZmVyZW5jZXMuYWxlcnRUaHJlc2hvbGQsCiAgICAgIGVuYWJsZWQ6ICAgcmVxLnVzZXIucHJlZmVyZW5jZXMuYWxlcnRFbmFibGVkLAogICAgICBjaGFubmVsczogIHJlcS51c2VyLnByZWZlcmVuY2VzLmFsZXJ0Q2hhbm5lbHMsCiAgICB9LAogIH0pOwp9KTsKCi8vIFBPU1QgL2FwaS91c2VyL2FsZXJ0cyDigJQgc2F2ZSBhbGVydCBzZXR0aW5ncwphcHAucG9zdCgiL2FwaS91c2VyL2FsZXJ0cyIsIHJlcXVpcmVBdXRoLCAocmVxLCByZXMpID0+IHsKICBjb25zdCB7IHRocmVzaG9sZCwgZW5hYmxlZCwgY2hhbm5lbHMgfSA9IHJlcS5ib2R5OwogIGNvbnN0IHVzZXJTdG9yZSA9IHJlcXVpcmUoIi4vZGIiKTsKICBjb25zdCB1cGRhdGVkID0gdXNlclN0b3JlLnVwZGF0ZVByZWZlcmVuY2VzKHJlcS51c2VyLmlkLCB7CiAgICBhbGVydFRocmVzaG9sZDogdGhyZXNob2xkLAogICAgYWxlcnRFbmFibGVkOiAgIGVuYWJsZWQsCiAgICBhbGVydENoYW5uZWxzOiAgY2hhbm5lbHMsCiAgfSk7CiAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBhbGVydHM6IHVwZGF0ZWQucHJlZmVyZW5jZXMgfSk7Cn0pOwoKYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7CiAgY29uc29sZS5sb2coYFxu4pqhIFN0cm9vbVNsaW0gdjIgcnVubmluZyBvbiBodHRwOi8vbG9jYWxob3N0OiR7UE9SVH1gKTsKICBjb25zb2xlLmxvZyhgICAgSGVhbHRoOiAgICBodHRwOi8vbG9jYWxob3N0OiR7UE9SVH0vYXBpL2hlYWx0aGApOwogIGNvbnNvbGUubG9nKGAgICBQcmljZXM6ICAgIGh0dHA6Ly9sb2NhbGhvc3Q6JHtQT1JUfS9hcGkvcHJpY2VzL3RvZGF5YCk7CiAgY29uc29sZS5sb2coYCAgIEF1dGg6ICAgICAgaHR0cDovL2xvY2FsaG9zdDoke1BPUlR9L2F1dGgvcmVnaXN0ZXJcbmApOwp9KTsK"
WriteB64 "frontend\index.html" "PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9Im5sLUJFIj4KICA8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+U3Ryb29tU2xpbSDigJQgQmVsZ2l1bSBSZWFsLVRpbWUgRWxlY3RyaWNpdHkgUHJpY2VzPC90aXRsZT4KICAgIDxtZXRhIG5hbWU9ImRlc2NyaXB0aW9uIiBjb250ZW50PSJSZWFsLXRpbWUgRVBFWCBTcG90IGVsZWN0cmljaXR5IHByaWNlcyBmb3IgQmVsZ2l1bS4gRmluZCB0aGUgY2hlYXBlc3QgaG91cnMsIGNvbXBhcmUgc3VwcGxpZXJzLCBzZXQgYWxlcnRzLiIgLz4KICAgIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbSI+CiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PURNK1NhbnM6d2dodEA0MDA7NTAwOzYwMDs3MDA7ODAwOzkwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICA8c3R5bGU+CiAgICAgICogeyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KICAgICAgYm9keSB7IGJhY2tncm91bmQ6ICMwNjBCMTQ7IH0KICAgIDwvc3R5bGU+CiAgPC9oZWFkPgogIDxib2R5PgogICAgPGRpdiBpZD0icm9vdCI+PC9kaXY+CiAgICA8c2NyaXB0IHR5cGU9Im1vZHVsZSIgc3JjPSIvc3JjL21haW4uanN4Ij48L3NjcmlwdD4KICA8L2JvZHk+CjwvaHRtbD4K"
WriteB64 "frontend\package.json" "ewogICJuYW1lIjogInN0cm9vbXNsaW0tZnJvbnRlbmQiLAogICJ2ZXJzaW9uIjogIjIuMC4wIiwKICAidHlwZSI6ICJtb2R1bGUiLAogICJzY3JpcHRzIjogewogICAgImRldiI6ICJ2aXRlIiwKICAgICJidWlsZCI6ICJ2aXRlIGJ1aWxkIiwKICAgICJwcmV2aWV3IjogInZpdGUgcHJldmlldyIKICB9LAogICJkZXBlbmRlbmNpZXMiOiB7CiAgICAicmVhY3QiOiAiXjE4LjIuMCIsCiAgICAicmVhY3QtZG9tIjogIl4xOC4yLjAiLAogICAgInJlY2hhcnRzIjogIl4yLjEwLjMiLAogICAgImRhdGUtZm5zIjogIl4zLjMuMSIKICB9LAogICJkZXZEZXBlbmRlbmNpZXMiOiB7CiAgICAiQHZpdGVqcy9wbHVnaW4tcmVhY3QiOiAiXjQuMi4xIiwKICAgICJ2aXRlIjogIl41LjAuMTEiCiAgfQp9Cg=="
WriteB64 "frontend\src\App.jsx" "LyoqCiAqIEFwcC5qc3gg4oCUIFN0cm9vbVNsaW0gdjIgd2l0aCBBdXRoZW50aWNhdGlvbgogKiBSb3V0ZXM6CiAqICAgTm90IGxvZ2dlZCBpbiDihpIgQXV0aFBhZ2UgKGxvZ2luL3JlZ2lzdGVyKQogKiAgIExvZ2dlZCBpbiAgICAg4oaSIERhc2hib2FyZCAocHJpY2VzKSBvciBQcm9maWxlUGFnZQogKi8KCmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAicmVhY3QiOwppbXBvcnQgeyB1c2VBdXRoIH0gIGZyb20gIi4vY29udGV4dC9BdXRoQ29udGV4dCI7CmltcG9ydCBBdXRoUGFnZSAgICAgZnJvbSAiLi9wYWdlcy9BdXRoUGFnZSI7CmltcG9ydCBQcm9maWxlUGFnZSAgZnJvbSAiLi9wYWdlcy9Qcm9maWxlUGFnZSI7CmltcG9ydCBEYXNoYm9hcmQgICAgZnJvbSAiLi9wYWdlcy9EYXNoYm9hcmQiOwoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKCkgewogIGNvbnN0IHsgdXNlciwgbG9hZGluZyB9ID0gdXNlQXV0aCgpOwogIGNvbnN0IFtwYWdlLCBzZXRQYWdlXSA9IHVzZVN0YXRlKCJkYXNoYm9hcmQiKTsgLy8gImRhc2hib2FyZCIgfCAicHJvZmlsZSIKCiAgLy8gTG9hZGluZyBzcGxhc2ggd2hpbGUgY2hlY2tpbmcgc3RvcmVkIHNlc3Npb24KICBpZiAobG9hZGluZykgewogICAgcmV0dXJuICgKICAgICAgPGRpdiBzdHlsZT17ewogICAgICAgIG1pbkhlaWdodDogIjEwMHZoIiwKICAgICAgICBiYWNrZ3JvdW5kOiAiIzA2MEIxNCIsCiAgICAgICAgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwganVzdGlmeUNvbnRlbnQ6ICJjZW50ZXIiLAogICAgICAgIGZvbnRGYW1pbHk6ICInRE0gU2FucycsIHN5c3RlbS11aSwgc2Fucy1zZXJpZiIsCiAgICAgIH19PgogICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAiY2VudGVyIiB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDQ4LCBtYXJnaW5Cb3R0b206IDE2IH19PuKaoTwvZGl2PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBjb2xvcjogIiMzMzQxNTUiLCBmb250U2l6ZTogMTQgfX0+TG9hZGluZyBTdHJvb21TbGlt4oCmPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgKTsKICB9CgogIC8vIE5vdCBsb2dnZWQgaW4g4oaSIHNob3cgYXV0aCBwYWdlCiAgaWYgKCF1c2VyKSByZXR1cm4gPEF1dGhQYWdlIC8+OwoKICAvLyBQcm9maWxlIHBhZ2UKICBpZiAocGFnZSA9PT0gInByb2ZpbGUiKSB7CiAgICByZXR1cm4gPFByb2ZpbGVQYWdlIG9uQmFjaz17KCkgPT4gc2V0UGFnZSgiZGFzaGJvYXJkIil9IC8+OwogIH0KCiAgLy8gTWFpbiBkYXNoYm9hcmQKICByZXR1cm4gPERhc2hib2FyZCBvbkdvUHJvZmlsZT17KCkgPT4gc2V0UGFnZSgicHJvZmlsZSIpfSAvPjsKfQo="
WriteB64 "frontend\src\context\AuthContext.jsx" "LyoqCiAqIGNvbnRleHQvQXV0aENvbnRleHQuanN4CiAqIEdsb2JhbCBhdXRoZW50aWNhdGlvbiBzdGF0ZSDigJQgd3JhcHMgdGhlIGVudGlyZSBhcHAKICogUHJvdmlkZXM6IHVzZXIsIGxvZ2luLCBsb2dvdXQsIHJlZ2lzdGVyLCB1cGRhdGVQcmVmZXJlbmNlcwogKi8KCmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAicmVhY3QiOwoKY29uc3QgQXV0aENvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwpOwpjb25zdCBBUEkgPSAiL2F1dGgiOwoKLy8gVG9rZW4gaGVscGVycwpjb25zdCBzdG9yYWdlID0gewogIGdldEFjY2VzczogICAgKCkgICAgPT4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInNzX2FjY2VzcyIpLAogIGdldFJlZnJlc2g6ICAgKCkgICAgPT4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInNzX3JlZnJlc2giKSwKICBzZXRBY2Nlc3M6ICAgICh0KSAgID0+IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzc19hY2Nlc3MiLCB0KSwKICBzZXRSZWZyZXNoOiAgICh0KSAgID0+IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzc19yZWZyZXNoIiwgdCksCiAgY2xlYXI6ICAgICAgICAoKSAgICA9PiB7IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJzc19hY2Nlc3MiKTsgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInNzX3JlZnJlc2giKTsgfSwKfTsKCmV4cG9ydCBmdW5jdGlvbiBBdXRoUHJvdmlkZXIoeyBjaGlsZHJlbiB9KSB7CiAgY29uc3QgW3VzZXIsICAgIHNldFVzZXJdICAgID0gdXNlU3RhdGUobnVsbCk7CiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7IC8vIHRydWUgd2hpbGUgY2hlY2tpbmcgc3RvcmVkIHNlc3Npb24KCiAgLy8g4pSA4pSAIEF1dGhlbnRpY2F0ZWQgZmV0Y2ggKGF1dG8tYXR0YWNoZXMgSldUKSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICBjb25zdCBhdXRoRmV0Y2ggPSB1c2VDYWxsYmFjayhhc3luYyAodXJsLCBvcHRpb25zID0ge30pID0+IHsKICAgIGxldCB0b2tlbiA9IHN0b3JhZ2UuZ2V0QWNjZXNzKCk7CiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsKICAgICAgLi4ub3B0aW9ucywKICAgICAgaGVhZGVyczogeyAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLCAuLi4ob3B0aW9ucy5oZWFkZXJzIHx8IHt9KSwgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAgfSwKICAgIH0pOwoKICAgIC8vIFRva2VuIGV4cGlyZWQg4oaSIHRyeSByZWZyZXNoCiAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXMuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpOwogICAgICBpZiAoYm9keS5jb2RlID09PSAiVE9LRU5fRVhQSVJFRCIpIHsKICAgICAgICBjb25zdCByZWZyZXNoZWQgPSBhd2FpdCB0cnlSZWZyZXNoKCk7CiAgICAgICAgaWYgKHJlZnJlc2hlZCkgewogICAgICAgICAgdG9rZW4gPSBzdG9yYWdlLmdldEFjY2VzcygpOwogICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgewogICAgICAgICAgICAuLi5vcHRpb25zLAogICAgICAgICAgICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsIC4uLihvcHRpb25zLmhlYWRlcnMgfHwge30pLCBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9LAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHNldFVzZXIobnVsbCk7CiAgICAgIHN0b3JhZ2UuY2xlYXIoKTsKICAgIH0KICAgIHJldHVybiByZXM7CiAgfSwgW10pOwoKICAvLyDilIDilIAgVHJ5IHRvIHJlZnJlc2ggdG9rZW4g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgY29uc3QgdHJ5UmVmcmVzaCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHsKICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IHN0b3JhZ2UuZ2V0UmVmcmVzaCgpOwogICAgaWYgKCFyZWZyZXNoVG9rZW4pIHJldHVybiBmYWxzZTsKICAgIHRyeSB7CiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtBUEl9L3JlZnJlc2hgLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgaGVhZGVyczogeyAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyByZWZyZXNoVG9rZW4gfSksCiAgICAgIH0pOwogICAgICBpZiAoIXJlcy5vaykgcmV0dXJuIGZhbHNlOwogICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgc3RvcmFnZS5zZXRBY2Nlc3MoanNvbi5hY2Nlc3NUb2tlbik7CiAgICAgIHN0b3JhZ2Uuc2V0UmVmcmVzaChqc29uLnJlZnJlc2hUb2tlbik7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaCB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCBbXSk7CgogIC8vIOKUgOKUgCBSZXN0b3JlIHNlc3Npb24gb24gcGFnZSBsb2FkIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCByZXN0b3JlID0gYXN5bmMgKCkgPT4gewogICAgICBjb25zdCB0b2tlbiA9IHN0b3JhZ2UuZ2V0QWNjZXNzKCk7CiAgICAgIGlmICghdG9rZW4pIHsgc2V0TG9hZGluZyhmYWxzZSk7IHJldHVybjsgfQogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBhdXRoRmV0Y2goYCR7QVBJfS9tZWApOwogICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpOwogICAgICAgIGlmIChqc29uLnN1Y2Nlc3MpIHNldFVzZXIoanNvbi51c2VyKTsKICAgICAgICBlbHNlIHN0b3JhZ2UuY2xlYXIoKTsKICAgICAgfSBjYXRjaCB7CiAgICAgICAgc3RvcmFnZS5jbGVhcigpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHNldExvYWRpbmcoZmFsc2UpOwogICAgICB9CiAgICB9OwogICAgcmVzdG9yZSgpOwogIH0sIFthdXRoRmV0Y2hdKTsKCiAgLy8g4pSA4pSAIFJlZ2lzdGVyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogIGNvbnN0IHJlZ2lzdGVyID0gYXN5bmMgKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0pID0+IHsKICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtBUEl9L3JlZ2lzdGVyYCwgewogICAgICBtZXRob2Q6ICAiUE9TVCIsCiAgICAgIGhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiB9LAogICAgICBib2R5OiAgICBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGVtYWlsLCBwYXNzd29yZCB9KSwKICAgIH0pOwogICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICBpZiAoIWpzb24uc3VjY2VzcykgdGhyb3cgbmV3IEVycm9yKGpzb24uZXJyb3IpOwogICAgc3RvcmFnZS5zZXRBY2Nlc3MoanNvbi5hY2Nlc3NUb2tlbik7CiAgICBzdG9yYWdlLnNldFJlZnJlc2goanNvbi5yZWZyZXNoVG9rZW4pOwogICAgc2V0VXNlcihqc29uLnVzZXIpOwogICAgcmV0dXJuIGpzb24udXNlcjsKICB9OwoKICAvLyDilIDilIAgTG9naW4g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgY29uc3QgbG9naW4gPSBhc3luYyAoeyBlbWFpbCwgcGFzc3dvcmQgfSkgPT4gewogICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke0FQSX0vbG9naW5gLCB7CiAgICAgIG1ldGhvZDogICJQT1NUIiwKICAgICAgaGVhZGVyczogeyAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iIH0sCiAgICAgIGJvZHk6ICAgIEpTT04uc3RyaW5naWZ5KHsgZW1haWwsIHBhc3N3b3JkIH0pLAogICAgfSk7CiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTsKICAgIGlmICghanNvbi5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IoanNvbi5lcnJvcik7CiAgICBzdG9yYWdlLnNldEFjY2Vzcyhqc29uLmFjY2Vzc1Rva2VuKTsKICAgIHN0b3JhZ2Uuc2V0UmVmcmVzaChqc29uLnJlZnJlc2hUb2tlbik7CiAgICBzZXRVc2VyKGpzb24udXNlcik7CiAgICByZXR1cm4ganNvbi51c2VyOwogIH07CgogIC8vIOKUgOKUgCBMb2dvdXQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgY29uc3QgbG9nb3V0ID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgYXdhaXQgZmV0Y2goYCR7QVBJfS9sb2dvdXRgLCB7CiAgICAgICAgbWV0aG9kOiAgIlBPU1QiLAogICAgICAgIGhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiB9LAogICAgICAgIGJvZHk6ICAgIEpTT04uc3RyaW5naWZ5KHsgcmVmcmVzaFRva2VuOiBzdG9yYWdlLmdldFJlZnJlc2goKSB9KSwKICAgICAgfSk7CiAgICB9IGNhdGNoIHt9CiAgICBzZXRVc2VyKG51bGwpOwogICAgc3RvcmFnZS5jbGVhcigpOwogIH07CgogIC8vIOKUgOKUgCBVcGRhdGUgcHJlZmVyZW5jZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgY29uc3QgdXBkYXRlUHJlZmVyZW5jZXMgPSBhc3luYyAocHJlZnMpID0+IHsKICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBhdXRoRmV0Y2goYCR7QVBJfS9wcmVmZXJlbmNlc2AsIHsKICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgYm9keTogICBKU09OLnN0cmluZ2lmeShwcmVmcyksCiAgICB9KTsKICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpOwogICAgaWYgKCFqc29uLnN1Y2Nlc3MpIHRocm93IG5ldyBFcnJvcihqc29uLmVycm9yKTsKICAgIHNldFVzZXIocHJldiA9PiAoeyAuLi5wcmV2LCBwcmVmZXJlbmNlczoganNvbi5wcmVmZXJlbmNlcyB9KSk7CiAgICByZXR1cm4ganNvbi5wcmVmZXJlbmNlczsKICB9OwoKICByZXR1cm4gKAogICAgPEF1dGhDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IHVzZXIsIGxvYWRpbmcsIGxvZ2luLCBsb2dvdXQsIHJlZ2lzdGVyLCB1cGRhdGVQcmVmZXJlbmNlcywgYXV0aEZldGNoIH19PgogICAgICB7Y2hpbGRyZW59CiAgICA8L0F1dGhDb250ZXh0LlByb3ZpZGVyPgogICk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB1c2VBdXRoKCkgewogIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQoQXV0aENvbnRleHQpOwogIGlmICghY3R4KSB0aHJvdyBuZXcgRXJyb3IoInVzZUF1dGggbXVzdCBiZSBpbnNpZGUgQXV0aFByb3ZpZGVyIik7CiAgcmV0dXJuIGN0eDsKfQo="
WriteB64 "frontend\src\hooks\usePrices.js" "Ly8gaG9va3MvdXNlUHJpY2VzLmpzCi8vIEZldGNoZXMgcmVhbCBlbGVjdHJpY2l0eSBwcmljZXMgZnJvbSBvdXIgcHJveHkgYmFja2VuZAovLyBBdXRvLXJlZnJlc2hlcyBldmVyeSAxNSBtaW51dGVzIChwcmljZXMgdXBkYXRlIG9uIHRoZSBob3VyKQoKaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCcKCmNvbnN0IEFQSV9CQVNFID0gaW1wb3J0Lm1ldGEuZW52LlZJVEVfQVBJX1VSTCB8fCAnL2FwaScKY29uc3QgUkVGUkVTSF9JTlRFUlZBTCA9IDE1ICogNjAgKiAxMDAwIC8vIDE1IG1pbnV0ZXMKCmV4cG9ydCBmdW5jdGlvbiB1c2VQcmljZXMoKSB7CiAgY29uc3QgW3ByaWNlcywgc2V0UHJpY2VzXSA9IHVzZVN0YXRlKFtdKQogIGNvbnN0IFtzdGF0cywgc2V0U3RhdHNdID0gdXNlU3RhdGUobnVsbCkKICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKQogIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUobnVsbCkKICBjb25zdCBbbGFzdEZldGNoZWQsIHNldExhc3RGZXRjaGVkXSA9IHVzZVN0YXRlKG51bGwpCiAgY29uc3QgW3NvdXJjZSwgc2V0U291cmNlXSA9IHVzZVN0YXRlKG51bGwpCgogIGNvbnN0IGZldGNoUHJpY2VzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgc2V0RXJyb3IobnVsbCkKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0V9L3ByaWNlcy90b2RheWApCiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXMuc3RhdHVzfTogJHtyZXMuc3RhdHVzVGV4dH1gKQogICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKQogICAgICBpZiAoIWpzb24uc3VjY2VzcykgdGhyb3cgbmV3IEVycm9yKGpzb24uZXJyb3IgfHwgJ1Vua25vd24gZXJyb3IgZnJvbSBBUEknKQoKICAgICAgc2V0UHJpY2VzKGpzb24uZGF0YSkKICAgICAgc2V0U3RhdHMoanNvbi5zdGF0cykKICAgICAgc2V0U291cmNlKGpzb24uc291cmNlKQogICAgICBzZXRMYXN0RmV0Y2hlZChuZXcgRGF0ZSgpKQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIHNldEVycm9yKGVyci5tZXNzYWdlKQogICAgICBjb25zb2xlLmVycm9yKCdQcmljZSBmZXRjaCBlcnJvcjonLCBlcnIpCiAgICB9IGZpbmFsbHkgewogICAgICBzZXRMb2FkaW5nKGZhbHNlKQogICAgfQogIH0sIFtdKQoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgZmV0Y2hQcmljZXMoKQogICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmZXRjaFByaWNlcywgUkVGUkVTSF9JTlRFUlZBTCkKICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKQogIH0sIFtmZXRjaFByaWNlc10pCgogIHJldHVybiB7IHByaWNlcywgc3RhdHMsIGxvYWRpbmcsIGVycm9yLCBsYXN0RmV0Y2hlZCwgc291cmNlLCByZWZldGNoOiBmZXRjaFByaWNlcyB9Cn0KCmV4cG9ydCBmdW5jdGlvbiB1c2VDdXJyZW50UHJpY2UoKSB7CiAgY29uc3QgW2N1cnJlbnQsIHNldEN1cnJlbnRdID0gdXNlU3RhdGUobnVsbCkKICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKQoKICBjb25zdCBmZXRjaEN1cnJlbnQgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtBUElfQkFTRX0vY3VycmVudGApCiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpCiAgICAgIGlmIChqc29uLnN1Y2Nlc3MpIHNldEN1cnJlbnQoanNvbi5jdXJyZW50KQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ0N1cnJlbnQgcHJpY2UgZXJyb3I6JywgZXJyKQogICAgfSBmaW5hbGx5IHsKICAgICAgc2V0TG9hZGluZyhmYWxzZSkKICAgIH0KICB9LCBbXSkKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGZldGNoQ3VycmVudCgpCiAgICAvLyBSZWZyZXNoIGN1cnJlbnQgcHJpY2UgZXZlcnkgNjAgc2Vjb25kcyBmb3IgdGhlIGxpdmUgdGlja2VyCiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKGZldGNoQ3VycmVudCwgNjAwMDApCiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCkKICB9LCBbZmV0Y2hDdXJyZW50XSkKCiAgcmV0dXJuIHsgY3VycmVudCwgbG9hZGluZyB9Cn0KCmV4cG9ydCBmdW5jdGlvbiB1c2VDaGVhcGVzdEhvdXJzKG4gPSA1KSB7CiAgY29uc3QgW2NoZWFwZXN0LCBzZXRDaGVhcGVzdF0gPSB1c2VTdGF0ZShbXSkKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGZldGNoKGAke0FQSV9CQVNFfS9jaGVhcGVzdD9ob3Vycz0ke259YCkKICAgICAgLnRoZW4ociA9PiByLmpzb24oKSkKICAgICAgLnRoZW4oanNvbiA9PiB7IGlmIChqc29uLnN1Y2Nlc3MpIHNldENoZWFwZXN0KGpzb24uY2hlYXBlc3RfaG91cnMpIH0pCiAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKQogIH0sIFtuXSkKCiAgcmV0dXJuIGNoZWFwZXN0Cn0K"
WriteB64 "frontend\src\main.jsx" "aW1wb3J0IFJlYWN0IGZyb20gInJlYWN0IjsKaW1wb3J0IFJlYWN0RE9NIGZyb20gInJlYWN0LWRvbS9jbGllbnQiOwppbXBvcnQgQXBwIGZyb20gIi4vQXBwLmpzeCI7CmltcG9ydCB7IEF1dGhQcm92aWRlciB9IGZyb20gIi4vY29udGV4dC9BdXRoQ29udGV4dC5qc3giOwoKUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicm9vdCIpKS5yZW5kZXIoCiAgPFJlYWN0LlN0cmljdE1vZGU+CiAgICA8QXV0aFByb3ZpZGVyPgogICAgICA8QXBwIC8+CiAgICA8L0F1dGhQcm92aWRlcj4KICA8L1JlYWN0LlN0cmljdE1vZGU+Cik7Cg=="
WriteB64 "frontend\src\pages\AuthPage.jsx" "LyoqCiAqIHBhZ2VzL0F1dGhQYWdlLmpzeAogKiBMb2dpbiArIFJlZ2lzdGVyIHBhZ2Ug4oCUIHRvZ2dsZXMgYmV0d2VlbiBib3RoIG1vZGVzCiAqLwoKaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICJyZWFjdCI7CmltcG9ydCB7IHVzZUF1dGggfSAgZnJvbSAiLi4vY29udGV4dC9BdXRoQ29udGV4dCI7Cgpjb25zdCBDID0gewogIG5hdnk6ICAiIzBEMUIzRSIsCiAgYmx1ZTogICIjMUE1NkE0IiwKICB0ZWFsOiAgIiMwRDk0ODgiLAogIHdoaXRlOiAiI0ZGRkZGRiIsCiAgZXJyb3I6ICIjRUY0NDQ0IiwKICBncmVlbjogIiMwNTk2NjkiLAp9OwoKZnVuY3Rpb24gSW5wdXQoeyBsYWJlbCwgdHlwZSA9ICJ0ZXh0IiwgdmFsdWUsIG9uQ2hhbmdlLCBwbGFjZWhvbGRlciwgYXV0b0NvbXBsZXRlIH0pIHsKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDE4IH19PgogICAgICA8bGFiZWwgc3R5bGU9e3sgZGlzcGxheTogImJsb2NrIiwgZm9udFNpemU6IDEzLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAiI0NCRDVFMSIsIG1hcmdpbkJvdHRvbTogNyB9fT4KICAgICAgICB7bGFiZWx9CiAgICAgIDwvbGFiZWw+CiAgICAgIDxpbnB1dAogICAgICAgIHR5cGU9e3R5cGV9CiAgICAgICAgdmFsdWU9e3ZhbHVlfQogICAgICAgIG9uQ2hhbmdlPXtlID0+IG9uQ2hhbmdlKGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9CiAgICAgICAgYXV0b0NvbXBsZXRlPXthdXRvQ29tcGxldGV9CiAgICAgICAgc3R5bGU9e3sKICAgICAgICAgIHdpZHRoOiAiMTAwJSIsIHBhZGRpbmc6ICIxMnB4IDE2cHgiLCBib3JkZXJSYWRpdXM6IDEwLCBmb250U2l6ZTogMTUsCiAgICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgyNTUsMjU1LDI1NSwwLjA3KSIsIGJvcmRlcjogIjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMTUpIiwKICAgICAgICAgIGNvbG9yOiBDLndoaXRlLCBvdXRsaW5lOiAibm9uZSIsIGJveFNpemluZzogImJvcmRlci1ib3giLAogICAgICAgICAgdHJhbnNpdGlvbjogImJvcmRlci1jb2xvciAwLjJzIiwKICAgICAgICB9fQogICAgICAgIG9uRm9jdXM9e2UgPT4gZS50YXJnZXQuc3R5bGUuYm9yZGVyQ29sb3IgPSBDLnRlYWx9CiAgICAgICAgb25CbHVyPXtlID0+IGUudGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gInJnYmEoMjU1LDI1NSwyNTUsMC4xNSkifQogICAgICAvPgogICAgPC9kaXY+CiAgKTsKfQoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXV0aFBhZ2UoKSB7CiAgY29uc3QgeyBsb2dpbiwgcmVnaXN0ZXIgfSA9IHVzZUF1dGgoKTsKICBjb25zdCBbbW9kZSwgICAgIHNldE1vZGVdICAgICA9IHVzZVN0YXRlKCJsb2dpbiIpOyAvLyAibG9naW4iIHwgInJlZ2lzdGVyIgogIGNvbnN0IFtuYW1lLCAgICAgc2V0TmFtZV0gICAgID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFtlbWFpbCwgICAgc2V0RW1haWxdICAgID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFtwYXNzd29yZCwgc2V0UGFzc3dvcmRdID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFtjb25maXJtLCAgc2V0Q29uZmlybV0gID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFtlcnJvciwgICAgc2V0RXJyb3JdICAgID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFtsb2FkaW5nLCAgc2V0TG9hZGluZ10gID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtzdWNjZXNzLCAgc2V0U3VjY2Vzc10gID0gdXNlU3RhdGUoIiIpOwoKICBjb25zdCByZXNldCA9ICgpID0+IHsgc2V0RXJyb3IoIiIpOyBzZXRTdWNjZXNzKCIiKTsgfTsKCiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKCkgPT4gewogICAgcmVzZXQoKTsKICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7IHNldEVycm9yKCJQbGVhc2UgZmlsbCBpbiBhbGwgZmllbGRzIik7IHJldHVybjsgfQogICAgaWYgKG1vZGUgPT09ICJyZWdpc3RlciIpIHsKICAgICAgaWYgKCFuYW1lLnRyaW0oKSkgICAgICAgeyBzZXRFcnJvcigiUGxlYXNlIGVudGVyIHlvdXIgbmFtZSIpOyByZXR1cm47IH0KICAgICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDgpeyBzZXRFcnJvcigiUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMiKTsgcmV0dXJuOyB9CiAgICAgIGlmIChwYXNzd29yZCAhPT0gY29uZmlybSl7IHNldEVycm9yKCJQYXNzd29yZHMgZG8gbm90IG1hdGNoIik7IHJldHVybjsgfQogICAgfQoKICAgIHNldExvYWRpbmcodHJ1ZSk7CiAgICB0cnkgewogICAgICBpZiAobW9kZSA9PT0gImxvZ2luIikgewogICAgICAgIGF3YWl0IGxvZ2luKHsgZW1haWwsIHBhc3N3b3JkIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGF3YWl0IHJlZ2lzdGVyKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0pOwogICAgICAgIHNldFN1Y2Nlc3MoIkFjY291bnQgY3JlYXRlZCEgV2VsY29tZSB0byBTdHJvb21TbGltIPCfjokiKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIHNldEVycm9yKGVyci5tZXNzYWdlIHx8ICJTb21ldGhpbmcgd2VudCB3cm9uZyIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgc2V0TG9hZGluZyhmYWxzZSk7CiAgICB9CiAgfTsKCiAgY29uc3Qgc3dpdGNoTW9kZSA9IChtKSA9PiB7CiAgICBzZXRNb2RlKG0pOyByZXNldCgpOwogICAgc2V0TmFtZSgiIik7IHNldEVtYWlsKCIiKTsgc2V0UGFzc3dvcmQoIiIpOyBzZXRDb25maXJtKCIiKTsKICB9OwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17ewogICAgICBtaW5IZWlnaHQ6ICIxMDB2aCIsCiAgICAgIGJhY2tncm91bmQ6ICJyYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBhdCAyMCUgMjAlLCAjMEExNjI4IDAlLCAjMDYwQjE0IDYwJSwgIzBBMEYxQSAxMDAlKSIsCiAgICAgIGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGp1c3RpZnlDb250ZW50OiAiY2VudGVyIiwKICAgICAgZm9udEZhbWlseTogIidETSBTYW5zJywgc3lzdGVtLXVpLCBzYW5zLXNlcmlmIiwgcGFkZGluZzogMjAsCiAgICB9fT4KICAgICAgPGRpdiBzdHlsZT17eyB3aWR0aDogIjEwMCUiLCBtYXhXaWR0aDogNDQwIH19PgoKICAgICAgICB7LyogTG9nbyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogImNlbnRlciIsIG1hcmdpbkJvdHRvbTogMzYgfX0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiA0MCwgbWFyZ2luQm90dG9tOiA4IH19PvCfh6fwn4eqPC9kaXY+CiAgICAgICAgICA8aDEgc3R5bGU9e3sgbWFyZ2luOiAwLCBmb250U2l6ZTogMjgsIGZvbnRXZWlnaHQ6IDkwMCwgY29sb3I6IEMud2hpdGUsIGxldHRlclNwYWNpbmc6ICItMXB4IiB9fT4KICAgICAgICAgICAgU3Ryb29tU2xpbQogICAgICAgICAgPC9oMT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDE0LCBjb2xvcjogIiM2NDc0OEIiLCBtYXJnaW5Ub3A6IDYgfX0+CiAgICAgICAgICAgIEJlbGdpdW0gU21hcnQgRWxlY3RyaWNpdHkgUHJpY2VzCiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIENhcmQgKi99CiAgICAgICAgPGRpdiBzdHlsZT17ewogICAgICAgICAgYmFja2dyb3VuZDogInJnYmEoMjU1LDI1NSwyNTUsMC4wNCkiLCBib3JkZXI6ICIxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpIiwKICAgICAgICAgIGJvcmRlclJhZGl1czogMjAsIHBhZGRpbmc6ICIzMnB4IDM2cHgiLAogICAgICAgICAgYm94U2hhZG93OiAiMCAyNXB4IDYwcHggcmdiYSgwLDAsMCwwLjUpIiwKICAgICAgICB9fT4KCiAgICAgICAgICB7LyogVGFiIHN3aXRjaGVyICovfQogICAgICAgICAgPGRpdiBzdHlsZT17ewogICAgICAgICAgICBkaXNwbGF5OiAiZmxleCIsIGJhY2tncm91bmQ6ICJyZ2JhKDAsMCwwLDAuMykiLCBib3JkZXJSYWRpdXM6IDEyLAogICAgICAgICAgICBwYWRkaW5nOiA0LCBtYXJnaW5Cb3R0b206IDI4LAogICAgICAgICAgfX0+CiAgICAgICAgICAgIHtbImxvZ2luIiwgInJlZ2lzdGVyIl0ubWFwKG0gPT4gKAogICAgICAgICAgICAgIDxidXR0b24ga2V5PXttfSBvbkNsaWNrPXsoKSA9PiBzd2l0Y2hNb2RlKG0pfSBzdHlsZT17ewogICAgICAgICAgICAgICAgZmxleDogMSwgcGFkZGluZzogIjlweCAwIiwgYm9yZGVyUmFkaXVzOiA5LCBmb250U2l6ZTogMTQsIGZvbnRXZWlnaHQ6IDYwMCwKICAgICAgICAgICAgICAgIGJvcmRlcjogIm5vbmUiLCBjdXJzb3I6ICJwb2ludGVyIiwgdHJhbnNpdGlvbjogImFsbCAwLjJzIiwKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IG1vZGUgPT09IG0gPyAicmdiYSgyNTUsMjU1LDI1NSwwLjEpIiA6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgICAgICBjb2xvcjogbW9kZSA9PT0gbSA/IEMud2hpdGUgOiAiIzY0NzQ4QiIsCiAgICAgICAgICAgICAgfX0+CiAgICAgICAgICAgICAgICB7bSA9PT0gImxvZ2luIiA/ICJTaWduIEluIiA6ICJDcmVhdGUgQWNjb3VudCJ9CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgey8qIEVycm9yIC8gc3VjY2VzcyAqL30KICAgICAgICAgIHtlcnJvciAmJiAoCiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgyMzksNjgsNjgsMC4xKSIsIGJvcmRlcjogIjFweCBzb2xpZCByZ2JhKDIzOSw2OCw2OCwwLjMpIiwKICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDEwLCBwYWRkaW5nOiAiMTBweCAxNHB4IiwgbWFyZ2luQm90dG9tOiAyMCwKICAgICAgICAgICAgICBmb250U2l6ZTogMTMsIGNvbG9yOiBDLmVycm9yLAogICAgICAgICAgICB9fT4KICAgICAgICAgICAgICDimqDvuI8ge2Vycm9yfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICl9CiAgICAgICAgICB7c3VjY2VzcyAmJiAoCiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSg1LDE1MCwxMDUsMC4xKSIsIGJvcmRlcjogIjFweCBzb2xpZCByZ2JhKDUsMTUwLDEwNSwwLjMpIiwKICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDEwLCBwYWRkaW5nOiAiMTBweCAxNHB4IiwgbWFyZ2luQm90dG9tOiAyMCwKICAgICAgICAgICAgICBmb250U2l6ZTogMTMsIGNvbG9yOiBDLmdyZWVuLAogICAgICAgICAgICB9fT4KICAgICAgICAgICAgICDinIUge3N1Y2Nlc3N9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKX0KCiAgICAgICAgICB7LyogRm9ybSBmaWVsZHMgKi99CiAgICAgICAgICB7bW9kZSA9PT0gInJlZ2lzdGVyIiAmJiAoCiAgICAgICAgICAgIDxJbnB1dCBsYWJlbD0iRnVsbCBOYW1lIiB2YWx1ZT17bmFtZX0gb25DaGFuZ2U9e3NldE5hbWV9CiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9IkphbiBKYW5zc2VuIiBhdXRvQ29tcGxldGU9Im5hbWUiIC8+CiAgICAgICAgICApfQogICAgICAgICAgPElucHV0IGxhYmVsPSJFbWFpbCBBZGRyZXNzIiB0eXBlPSJlbWFpbCIgdmFsdWU9e2VtYWlsfSBvbkNoYW5nZT17c2V0RW1haWx9CiAgICAgICAgICAgIHBsYWNlaG9sZGVyPSJqYW5AZXhhbXBsZS5iZSIgYXV0b0NvbXBsZXRlPSJlbWFpbCIgLz4KICAgICAgICAgIDxJbnB1dCBsYWJlbD0iUGFzc3dvcmQiIHR5cGU9InBhc3N3b3JkIiB2YWx1ZT17cGFzc3dvcmR9IG9uQ2hhbmdlPXtzZXRQYXNzd29yZH0KICAgICAgICAgICAgcGxhY2Vob2xkZXI9e21vZGUgPT09ICJyZWdpc3RlciIgPyAiTWluLiA4IGNoYXJhY3RlcnMiIDogIllvdXIgcGFzc3dvcmQifQogICAgICAgICAgICBhdXRvQ29tcGxldGU9e21vZGUgPT09ICJsb2dpbiIgPyAiY3VycmVudC1wYXNzd29yZCIgOiAibmV3LXBhc3N3b3JkIn0gLz4KICAgICAgICAgIHttb2RlID09PSAicmVnaXN0ZXIiICYmICgKICAgICAgICAgICAgPElucHV0IGxhYmVsPSJDb25maXJtIFBhc3N3b3JkIiB0eXBlPSJwYXNzd29yZCIgdmFsdWU9e2NvbmZpcm19IG9uQ2hhbmdlPXtzZXRDb25maXJtfQogICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSJSZXBlYXQgcGFzc3dvcmQiIGF1dG9Db21wbGV0ZT0ibmV3LXBhc3N3b3JkIiAvPgogICAgICAgICAgKX0KCiAgICAgICAgICB7LyogU3VibWl0IGJ1dHRvbiAqL30KICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlU3VibWl0fSBkaXNhYmxlZD17bG9hZGluZ30gc3R5bGU9e3sKICAgICAgICAgICAgd2lkdGg6ICIxMDAlIiwgcGFkZGluZzogIjE0cHggMCIsIGJvcmRlclJhZGl1czogMTIsIGZvbnRTaXplOiAxNSwKICAgICAgICAgICAgZm9udFdlaWdodDogNzAwLCBib3JkZXI6ICJub25lIiwgY3Vyc29yOiBsb2FkaW5nID8gIm5vdC1hbGxvd2VkIiA6ICJwb2ludGVyIiwKICAgICAgICAgICAgYmFja2dyb3VuZDogbG9hZGluZyA/ICJyZ2JhKDEzLDE0OCwxMzYsMC41KSIgOiBgbGluZWFyLWdyYWRpZW50KDEzNWRlZywgJHtDLnRlYWx9LCAke0MuYmx1ZX0pYCwKICAgICAgICAgICAgY29sb3I6IEMud2hpdGUsIG1hcmdpblRvcDogNCwgdHJhbnNpdGlvbjogImFsbCAwLjJzIiwKICAgICAgICAgICAgYm94U2hhZG93OiBsb2FkaW5nID8gIm5vbmUiIDogIjAgNHB4IDIwcHggcmdiYSgxMywxNDgsMTM2LDAuMzUpIiwKICAgICAgICAgIH19PgogICAgICAgICAgICB7bG9hZGluZyA/ICJQbGVhc2Ugd2FpdOKApiIgOiBtb2RlID09PSAibG9naW4iID8gIlNpZ24gSW4g4oaSIiA6ICJDcmVhdGUgQWNjb3VudCDihpIifQogICAgICAgICAgPC9idXR0b24+CgogICAgICAgICAgey8qIERpdmlkZXIg4oCUIGZ1dHVyZSBwcm92aWRlcnMgKi99CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOiAicmVsYXRpdmUiLCB0ZXh0QWxpZ246ICJjZW50ZXIiLCBtYXJnaW46ICIyNHB4IDAgMjBweCIgfX0+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcG9zaXRpb246ICJhYnNvbHV0ZSIsIHRvcDogIjUwJSIsIGxlZnQ6IDAsIHJpZ2h0OiAwLCBoZWlnaHQ6IDEsIGJhY2tncm91bmQ6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDgpIiB9fSAvPgogICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBwb3NpdGlvbjogInJlbGF0aXZlIiwgYmFja2dyb3VuZDogInRyYW5zcGFyZW50IiwgZm9udFNpemU6IDEyLCBjb2xvcjogIiM0NzU1NjkiLCBwYWRkaW5nOiAiMCAxMnB4IiB9fT4KICAgICAgICAgICAgICBDb21pbmcgc29vbgogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICB7LyogRnV0dXJlIHByb3ZpZGVycyAoZGlzYWJsZWQgZm9yIG5vdykgKi99CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgZ2FwOiAxMCB9fT4KICAgICAgICAgICAge1sKICAgICAgICAgICAgICB7IGljb246ICLwn5S1IiwgbGFiZWw6ICJpdHNtZSIsICBub3RlOiAiUGFydG5lcnNoaXAgcGVuZGluZyIgfSwKICAgICAgICAgICAgICB7IGljb246ICLwn5S0IiwgbGFiZWw6ICJHb29nbGUiLCBub3RlOiAiUGhhc2UgMiIgfSwKICAgICAgICAgICAgICB7IGljb246ICLimqsiLCBsYWJlbDogIkFwcGxlIiwgIG5vdGU6ICJQaGFzZSAyIiB9LAogICAgICAgICAgICBdLm1hcChwID0+ICgKICAgICAgICAgICAgICA8YnV0dG9uIGtleT17cC5sYWJlbH0gdGl0bGU9e3Aubm90ZX0gc3R5bGU9e3sKICAgICAgICAgICAgICAgIGZsZXg6IDEsIHBhZGRpbmc6ICIxMHB4IDhweCIsIGJvcmRlclJhZGl1czogMTAsIGZvbnRTaXplOiAxMiwKICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6IDYwMCwgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wOCkiLAogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogInJnYmEoMjU1LDI1NSwyNTUsMC4wMykiLCBjb2xvcjogIiM0NzU1NjkiLAogICAgICAgICAgICAgICAgY3Vyc29yOiAibm90LWFsbG93ZWQiLCBkaXNwbGF5OiAiZmxleCIsIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICJjZW50ZXIiLCBnYXA6IDYsCiAgICAgICAgICAgICAgfX0+CiAgICAgICAgICAgICAgICA8c3Bhbj57cC5pY29ufTwvc3Bhbj57cC5sYWJlbH0KICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgKSl9CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMSwgY29sb3I6ICIjMzM0MTU1IiwgdGV4dEFsaWduOiAiY2VudGVyIiwgbWFyZ2luVG9wOiAxNiB9fT4KICAgICAgICAgICAg8J+UkiBZb3VyIGRhdGEgaXMgc3RvcmVkIHNlY3VyZWx5IMK3IEdEUFIgY29tcGxpYW50CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9Cg=="
WriteB64 "frontend\src\pages\Dashboard.jsx" "LyoqCiAqIHBhZ2VzL0Rhc2hib2FyZC5qc3gKICogTWFpbiBwcmljZSBkYXNoYm9hcmQg4oCUIHNhbWUgYXMgYmVmb3JlIGJ1dCBub3cgdXNlci1hd2FyZQogKiBTaG93cyB1c2VyIG5hbWUsIHRoZWlyIHN1cHBsaWVyIHByZWZlcmVuY2UsIHNhdmVkIGFsZXJ0cwogKi8KCmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICJyZWFjdCI7CmltcG9ydCB7CiAgQXJlYUNoYXJ0LCBBcmVhLCBYQXhpcywgWUF4aXMsIENhcnRlc2lhbkdyaWQsIFRvb2x0aXAsCiAgUmVzcG9uc2l2ZUNvbnRhaW5lciwgUmVmZXJlbmNlTGluZSwgQmFyQ2hhcnQsIEJhciwgQ2VsbCwKfSBmcm9tICJyZWNoYXJ0cyI7CmltcG9ydCB7IHVzZUF1dGggfSAgICAgICBmcm9tICIuLi9jb250ZXh0L0F1dGhDb250ZXh0IjsKaW1wb3J0IHsgdXNlUHJpY2VzLCB1c2VDdXJyZW50UHJpY2UsIHVzZUNoZWFwZXN0SG91cnMgfSBmcm9tICIuLi9ob29rcy91c2VQcmljZXMiOwppbXBvcnQgeyBTVVBQTElFUlMsIGdldFN1cHBsaWVyUHJpY2UsIGdldFByaWNlQ29sb3IsIGdldFByaWNlTGFiZWwgfSBmcm9tICIuLi91dGlscy9wcmljZVV0aWxzIjsKCi8vIOKUgOKUgCBUb29sdGlwIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApmdW5jdGlvbiBQcmljZVRvb2x0aXAoeyBhY3RpdmUsIHBheWxvYWQsIGxhYmVsLCBzdXBwbGllciB9KSB7CiAgaWYgKCFhY3RpdmUgfHwgIXBheWxvYWQ/Lmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgY29uc3QgbXdoICA9IHBheWxvYWRbMF0/LnZhbHVlOwogIGlmIChtd2ggPT0gbnVsbCkgcmV0dXJuIG51bGw7CiAgY29uc3Qgc3VwICA9IFNVUFBMSUVSUy5maW5kKHMgPT4gcy5uYW1lID09PSBzdXBwbGllcik7CiAgY29uc3QgbGJsICA9IGdldFByaWNlTGFiZWwobXdoKTsKICBjb25zdCBjb2wgID0gZ2V0UHJpY2VDb2xvcihtd2gpOwogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7CiAgICAgIGJhY2tncm91bmQ6ICJyZ2JhKDgsMTIsMjIsMC45NykiLCBib3JkZXI6IGAxcHggc29saWQgJHtjb2x9NDRgLAogICAgICBib3JkZXJSYWRpdXM6IDE0LCBwYWRkaW5nOiAiMTRweCAxOHB4IiwKICAgIH19PgogICAgICA8ZGl2IHN0eWxlPXt7IGNvbG9yOiAiIzY2NyIsIGZvbnRTaXplOiAxMiwgbWFyZ2luQm90dG9tOiA0IH19PntsYWJlbH08L2Rpdj4KICAgICAgPGRpdiBzdHlsZT17eyBjb2xvcjogY29sLCBmb250U2l6ZTogMjQsIGZvbnRXZWlnaHQ6IDgwMCwgZm9udEZhbWlseTogIm1vbm9zcGFjZSIgfX0+CiAgICAgICAg4oKse213aC50b0ZpeGVkKDEpfTxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAxMiwgY29sb3I6ICIjNjY3IiB9fT4gL01XaDwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIHtzdXAgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgY29sb3I6ICIjYWFhIiwgZm9udFNpemU6IDEyLCBtYXJnaW5Ub3A6IDMgfX0+CiAgICAgICAgICB7c3VwLm5hbWV9OiA8c3BhbiBzdHlsZT17eyBjb2xvcjogIiNmZmYiIH19PuKCrHtnZXRTdXBwbGllclByaWNlKG13aCAvIDEwMDAsIHN1cCkudG9GaXhlZCg0KX0va1doPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICApfQogICAgICA8ZGl2IHN0eWxlPXt7IGNvbG9yOiBjb2wsIGZvbnRTaXplOiAxMiwgZm9udFdlaWdodDogNjAwLCBtYXJnaW5Ub3A6IDYgfX0+CiAgICAgICAge2xibC5lbW9qaX0ge2xibC50ZXh0fSDigJQge2xibC50aXB9CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfQoKZnVuY3Rpb24gU3RhdCh7IGxhYmVsLCB2YWx1ZSwgY29sb3IgfSkgewogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7CiAgICAgIGJhY2tncm91bmQ6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpIiwgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNykiLAogICAgICBib3JkZXJSYWRpdXM6IDE0LCBwYWRkaW5nOiAiMTRweCAxNnB4IiwgZmxleDogMSwgbWluV2lkdGg6IDExMCwKICAgIH19PgogICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgY29sb3I6ICIjNTU2IiwgbWFyZ2luQm90dG9tOiA0LCB0ZXh0VHJhbnNmb3JtOiAidXBwZXJjYXNlIiwgbGV0dGVyU3BhY2luZzogIjAuNXB4IiB9fT57bGFiZWx9PC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDE5LCBmb250V2VpZ2h0OiA4MDAsIGNvbG9yOiBjb2xvciB8fCAiI2ZmZiIsIGZvbnRGYW1pbHk6ICJtb25vc3BhY2UiIH19Pnt2YWx1ZX08L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0KCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERhc2hib2FyZCh7IG9uR29Qcm9maWxlIH0pIHsKICBjb25zdCB7IHVzZXIsIHVwZGF0ZVByZWZlcmVuY2VzIH0gPSB1c2VBdXRoKCk7CiAgY29uc3QgeyBwcmljZXMsIHN0YXRzLCBsb2FkaW5nLCBlcnJvciwgbGFzdEZldGNoZWQsIHNvdXJjZSwgcmVmZXRjaCB9ID0gdXNlUHJpY2VzKCk7CiAgY29uc3QgeyBjdXJyZW50IH0gID0gdXNlQ3VycmVudFByaWNlKCk7CiAgY29uc3QgY2hlYXBlc3QgICAgID0gdXNlQ2hlYXBlc3RIb3Vycyg1KTsKCiAgLy8gVXNlIHNhdmVkIHN1cHBsaWVyIGZyb20gdXNlciBwcmVmZXJlbmNlcwogIGNvbnN0IFtzdXBwbGllciwgICAgICAgc2V0U3VwcGxpZXJdICAgICAgID0gdXNlU3RhdGUodXNlcj8ucHJlZmVyZW5jZXM/LnN1cHBsaWVyIHx8ICJCb2x0IEVuZXJneSIpOwogIGNvbnN0IFt0YWIsICAgICAgICAgICAgc2V0VGFiXSAgICAgICAgICAgID0gdXNlU3RhdGUoInRvZGF5Iik7CiAgY29uc3QgW2FsZXJ0VGhyZXNob2xkLCBzZXRBbGVydFRocmVzaG9sZF0gPSB1c2VTdGF0ZSh1c2VyPy5wcmVmZXJlbmNlcz8uYWxlcnRUaHJlc2hvbGQgfHwgODApOwogIGNvbnN0IFthbGVydEFjdGl2ZSwgICAgc2V0QWxlcnRBY3RpdmVdICAgID0gdXNlU3RhdGUodXNlcj8ucHJlZmVyZW5jZXM/LmFsZXJ0RW5hYmxlZCB8fCBmYWxzZSk7CiAgY29uc3QgW25vdGlmaWNhdGlvbiwgICBzZXROb3RpZmljYXRpb25dICAgPSB1c2VTdGF0ZShudWxsKTsKCiAgLy8gQXV0by1zYXZlIHN1cHBsaWVyIGNoYW5nZSB0byBiYWNrZW5kCiAgY29uc3QgY2hhbmdlU3VwcGxpZXIgPSBhc3luYyAocykgPT4gewogICAgc2V0U3VwcGxpZXIocyk7CiAgICB0cnkgeyBhd2FpdCB1cGRhdGVQcmVmZXJlbmNlcyh7IHN1cHBsaWVyOiBzIH0pOyB9IGNhdGNoIHt9CiAgfTsKCiAgY29uc3QgdG9nZ2xlQWxlcnQgPSBhc3luYyAoKSA9PiB7CiAgICBjb25zdCBuZXh0ID0gIWFsZXJ0QWN0aXZlOwogICAgc2V0QWxlcnRBY3RpdmUobmV4dCk7CiAgICB0cnkgeyBhd2FpdCB1cGRhdGVQcmVmZXJlbmNlcyh7IGFsZXJ0RW5hYmxlZDogbmV4dCwgYWxlcnRUaHJlc2hvbGQgfSk7IH0gY2F0Y2gge30KICB9OwoKICBjb25zdCBzYXZlQWxlcnRUaHJlc2hvbGQgPSBhc3luYyAodikgPT4gewogICAgc2V0QWxlcnRUaHJlc2hvbGQodik7CiAgICB0cnkgeyBhd2FpdCB1cGRhdGVQcmVmZXJlbmNlcyh7IGFsZXJ0VGhyZXNob2xkOiB2IH0pOyB9IGNhdGNoIHt9CiAgfTsKCiAgLy8gQWxlcnQgdHJpZ2dlcgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAoIWN1cnJlbnQgfHwgIWFsZXJ0QWN0aXZlKSByZXR1cm47CiAgICBpZiAoY3VycmVudC5wcmljZV9ldXJfbXdoIDwgYWxlcnRUaHJlc2hvbGQpIHsKICAgICAgc2V0Tm90aWZpY2F0aW9uKGDimqEgUHJpY2UgYWxlcnQhIE5vdyDigqwke2N1cnJlbnQucHJpY2VfZXVyX213aC50b0ZpeGVkKDApfS9NV2gg4oCUIGJlbG93IHlvdXIg4oKsJHthbGVydFRocmVzaG9sZH0vTVdoIHRocmVzaG9sZGApOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHNldE5vdGlmaWNhdGlvbihudWxsKSwgNjAwMCk7CiAgICB9CiAgfSwgW2N1cnJlbnQsIGFsZXJ0VGhyZXNob2xkLCBhbGVydEFjdGl2ZV0pOwoKICBjb25zdCB0b2RheURhdGEgICAgPSBwcmljZXMuZmlsdGVyKHAgPT4gcC5kYXkgPT09ICJ0b2RheSIpOwogIGNvbnN0IHRvbW9ycm93RGF0YSA9IHByaWNlcy5maWx0ZXIocCA9PiBwLmRheSA9PT0gInRvbW9ycm93Iik7CiAgY29uc3QgY2hhcnREYXRhICAgID0gdGFiID09PSAidG9tb3Jyb3ciID8gdG9tb3Jyb3dEYXRhIDogdG9kYXlEYXRhOwogIGNvbnN0IG13aCAgICAgICAgICA9IGN1cnJlbnQ/LnByaWNlX2V1cl9td2ggPz8gbnVsbDsKICBjb25zdCBsYmwgICAgICAgICAgPSBtd2ggIT0gbnVsbCA/IGdldFByaWNlTGFiZWwobXdoKSA6IG51bGw7CiAgY29uc3Qgc3VwICAgICAgICAgID0gU1VQUExJRVJTLmZpbmQocyA9PiBzLm5hbWUgPT09IHN1cHBsaWVyKTsKICBjb25zdCByZXRhaWxLd2ggICAgPSBtd2ggIT0gbnVsbCAmJiBzdXAgPyBnZXRTdXBwbGllclByaWNlKG13aCAvIDEwMDAsIHN1cCkgOiBudWxsOwoKICBjb25zdCB0YWJzID0gWwogICAgeyBpZDogInRvZGF5IiwgICAgbGFiZWw6ICLwn5OIIFRvZGF5IiB9LAogICAgeyBpZDogInRvbW9ycm93IiwgbGFiZWw6ICLij6kgVG9tb3Jyb3ciIH0sCiAgICB7IGlkOiAiY2hlYXBlc3QiLCBsYWJlbDogIvCfkpogQmVzdCBIb3VycyIgfSwKICAgIHsgaWQ6ICJjb21wYXJlIiwgIGxhYmVsOiAi8J+PoiBTdXBwbGllcnMiIH0sCiAgICB7IGlkOiAiYWxlcnRzIiwgICBsYWJlbDogIvCflJQgQWxlcnRzIiB9LAogIF07CgogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7CiAgICAgIG1pbkhlaWdodDogIjEwMHZoIiwKICAgICAgYmFja2dyb3VuZDogInJhZGlhbC1ncmFkaWVudChlbGxpcHNlIGF0IDIwJSAyMCUsICMwQTE2MjggMCUsICMwNjBCMTQgNjAlLCAjMEEwRjFBIDEwMCUpIiwKICAgICAgY29sb3I6ICIjRThFREY1IiwgZm9udEZhbWlseTogIidETSBTYW5zJywgc3lzdGVtLXVpLCBzYW5zLXNlcmlmIiwKICAgIH19PgogICAgICB7LyogTm90aWZpY2F0aW9uIGJhbm5lciAqL30KICAgICAge25vdGlmaWNhdGlvbiAmJiAoCiAgICAgICAgPGRpdiBzdHlsZT17ewogICAgICAgICAgcG9zaXRpb246ICJmaXhlZCIsIHRvcDogMjAsIHJpZ2h0OiAyMCwgekluZGV4OiA5OTksCiAgICAgICAgICBiYWNrZ3JvdW5kOiAibGluZWFyLWdyYWRpZW50KDEzNWRlZywjMDBDODk2LCMwMDk5NzApIiwKICAgICAgICAgIGJvcmRlclJhZGl1czogMTQsIHBhZGRpbmc6ICIxNHB4IDIwcHgiLCBtYXhXaWR0aDogMzQwLAogICAgICAgICAgYm94U2hhZG93OiAiMCA4cHggMzJweCByZ2JhKDAsMjAwLDE1MCwwLjQpIiwKICAgICAgICAgIGZvbnRTaXplOiAxNCwgZm9udFdlaWdodDogNjAwLCBjb2xvcjogIiNmZmYiLAogICAgICAgIH19Pntub3RpZmljYXRpb259PC9kaXY+CiAgICAgICl9CgogICAgICA8ZGl2IHN0eWxlPXt7IG1heFdpZHRoOiAxMDAwLCBtYXJnaW46ICIwIGF1dG8iLCBwYWRkaW5nOiAiMjRweCAxOHB4IiB9fT4KCiAgICAgICAgey8qIOKUgOKUgCBIZWFkZXIg4pSA4pSAICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBhbGlnbkl0ZW1zOiAiZmxleC1zdGFydCIsIG1hcmdpbkJvdHRvbTogMjQsIGZsZXhXcmFwOiAid3JhcCIsIGdhcDogMTQgfX0+CiAgICAgICAgICA8ZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGdhcDogMTAsIG1hcmdpbkJvdHRvbTogNCB9fT4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogMjggfX0+8J+Hp/Cfh6o8L3NwYW4+CiAgICAgICAgICAgICAgPGgxIHN0eWxlPXt7IG1hcmdpbjogMCwgZm9udFNpemU6IDI0LCBmb250V2VpZ2h0OiA5MDAsIGxldHRlclNwYWNpbmc6ICItMXB4IiB9fT5TdHJvb21TbGltPC9oMT4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogMTEsIGNvbG9yOiAiIzAwQzg5NiIsIGJhY2tncm91bmQ6ICJyZ2JhKDAsMjAwLDE1MCwwLjEpIiwgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMCwyMDAsMTUwLDAuMjUpIiwgYm9yZGVyUmFkaXVzOiAyMCwgcGFkZGluZzogIjJweCAxMHB4IiwgZm9udFdlaWdodDogNzAwIH19PuKXjyBMSVZFPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTMsIGNvbG9yOiAiIzU1NiIgfX0+CiAgICAgICAgICAgICAge3NvdXJjZSB8fCAiRW5lcmd5LUNoYXJ0cyAvIEVsaWEgT3BlbiBEYXRhIn0gwrcgQmVsZ2l1bQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZ2FwOiAxMiwgZmxleFdyYXA6ICJ3cmFwIiB9fT4KICAgICAgICAgICAgey8qIExpdmUgcHJpY2UgKi99CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgyNTUsMjU1LDI1NSwwLjA0KSIsCiAgICAgICAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7bXdoICE9IG51bGwgPyBnZXRQcmljZUNvbG9yKG13aCkgKyAiNDQiIDogInJnYmEoMjU1LDI1NSwyNTUsMC4xKSJ9YCwKICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDE4LCBwYWRkaW5nOiAiMTJweCAyMHB4IiwgdGV4dEFsaWduOiAicmlnaHQiLAogICAgICAgICAgICB9fT4KICAgICAgICAgICAgICB7bG9hZGluZyA/IDxkaXYgc3R5bGU9e3sgY29sb3I6ICIjNTU2IiwgZm9udFNpemU6IDEzIH19PkxvYWRpbmfigKY8L2Rpdj4gOgogICAgICAgICAgICAgICBlcnJvciAgID8gPGRpdiBzdHlsZT17eyBjb2xvcjogIiNFRjQ0NDQiLCBmb250U2l6ZTogMTIgfX0+4pqg77iPIHtlcnJvcn08L2Rpdj4gOgogICAgICAgICAgICAgICBtd2ggIT0gbnVsbCA/ICg8PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTEsIGNvbG9yOiAiIzU1NiIsIG1hcmdpbkJvdHRvbTogMiB9fT5OT1cgwrcgRVBFWCBTcG90PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAzMCwgZm9udFdlaWdodDogOTAwLCBmb250RmFtaWx5OiAibW9ub3NwYWNlIiwgY29sb3I6IGdldFByaWNlQ29sb3IobXdoKSB9fT4KICAgICAgICAgICAgICAgICAg4oKse213aC50b0ZpeGVkKDEpfTxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAxMywgY29sb3I6ICIjNjY3IiwgZm9udFdlaWdodDogNDAwIH19PiAvTVdoPC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMiwgY29sb3I6ICIjODg4IiB9fT57bGJsPy5lbW9qaX0ge2xibD8udGV4dH08L2Rpdj4KICAgICAgICAgICAgICAgIHtyZXRhaWxLd2ggJiYgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTEsIGNvbG9yOiAiIzY2NyIsIG1hcmdpblRvcDogMiB9fT57c3VwcGxpZXJ9OiDigqx7cmV0YWlsS3doLnRvRml4ZWQoNCl9L2tXaDwvZGl2Pn0KICAgICAgICAgICAgICAgPC8+KSA6IG51bGx9CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgey8qIFVzZXIgbWVudSAqL30KICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkdvUHJvZmlsZX0gc3R5bGU9e3sKICAgICAgICAgICAgICBkaXNwbGF5OiAiZmxleCIsIGFsaWduSXRlbXM6ICJjZW50ZXIiLCBnYXA6IDEwLAogICAgICAgICAgICAgIGJhY2tncm91bmQ6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpIiwgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4xKSIsCiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAxNCwgcGFkZGluZzogIjEwcHggMTZweCIsIGN1cnNvcjogInBvaW50ZXIiLCBjb2xvcjogIiNFOEVERjUiLAogICAgICAgICAgICB9fT4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7CiAgICAgICAgICAgICAgICB3aWR0aDogMzQsIGhlaWdodDogMzQsIGJvcmRlclJhZGl1czogIjUwJSIsCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAibGluZWFyLWdyYWRpZW50KDEzNWRlZywjMEQ5NDg4LCMxQTU2QTQpIiwKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGp1c3RpZnlDb250ZW50OiAiY2VudGVyIiwKICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxNSwgZm9udFdlaWdodDogODAwLCBjb2xvcjogIiNmZmYiLAogICAgICAgICAgICAgIH19PgogICAgICAgICAgICAgICAgeyh1c2VyPy5uYW1lIHx8IHVzZXI/LmVtYWlsIHx8ICI/IilbMF0udG9VcHBlckNhc2UoKX0KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogImxlZnQiIH19PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTMsIGZvbnRXZWlnaHQ6IDYwMCB9fT57dXNlcj8ubmFtZSB8fCAiTXkgQWNjb3VudCJ9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMSwgY29sb3I6ICIjNTU2IiB9fT5WaWV3IHByb2ZpbGUg4oaSPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiDilIDilIAgU3RhdHMg4pSA4pSAICovfQogICAgICAgIHshbG9hZGluZyAmJiAhZXJyb3IgJiYgc3RhdHM/LnRvZGF5ICYmICgKICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBnYXA6IDEyLCBtYXJnaW5Cb3R0b206IDIyLCBmbGV4V3JhcDogIndyYXAiIH19PgogICAgICAgICAgICA8U3RhdCBsYWJlbD0iVG9kYXkgTWluIiB2YWx1ZT17YOKCrCR7c3RhdHMudG9kYXkubWluPy50b0ZpeGVkKDApfWB9IGNvbG9yPSIjMDBDODk2IiAvPgogICAgICAgICAgICA8U3RhdCBsYWJlbD0iVG9kYXkgQXZnIiB2YWx1ZT17YOKCrCR7c3RhdHMudG9kYXkuYXZnPy50b0ZpeGVkKDApfWB9IGNvbG9yPSIjRjU5RTBCIiAvPgogICAgICAgICAgICA8U3RhdCBsYWJlbD0iVG9kYXkgTWF4IiB2YWx1ZT17YOKCrCR7c3RhdHMudG9kYXkubWF4Py50b0ZpeGVkKDApfWB9IGNvbG9yPSIjRUY0NDQ0IiAvPgogICAgICAgICAgICA8U3RhdCBsYWJlbD0iTmVnYXRpdmUgSHJzIiB2YWx1ZT17c3RhdHMudG9kYXkubmVnYXRpdmVfaG91cnMgfHwgMH0gY29sb3I9IiMwMEU1RkYiIC8+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICApfQoKICAgICAgICB7Lyog4pSA4pSAIFN1cHBsaWVyIHNlbGVjdG9yIOKUgOKUgCAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMTggfX0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMSwgY29sb3I6ICIjNTU2IiwgbWFyZ2luQm90dG9tOiA4LCB0ZXh0VHJhbnNmb3JtOiAidXBwZXJjYXNlIiwgbGV0dGVyU3BhY2luZzogIjAuNXB4IiB9fT4KICAgICAgICAgICAgWW91ciBTdXBwbGllciB7dXNlcj8ucHJlZmVyZW5jZXM/LnN1cHBsaWVyID09PSBzdXBwbGllciA/ICLCtyDinIUgc2F2ZWQiIDogIsK3IHNhdmluZ+KApiJ9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBnYXA6IDgsIGZsZXhXcmFwOiAid3JhcCIgfX0+CiAgICAgICAgICAgIHtTVVBQTElFUlMubWFwKHMgPT4gKAogICAgICAgICAgICAgIDxidXR0b24ga2V5PXtzLm5hbWV9IG9uQ2xpY2s9eygpID0+IGNoYW5nZVN1cHBsaWVyKHMubmFtZSl9IHN0eWxlPXt7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiAiN3B4IDE0cHgiLCBib3JkZXJSYWRpdXM6IDMwLCBmb250U2l6ZTogMTIsIGZvbnRXZWlnaHQ6IDYwMCwgY3Vyc29yOiAicG9pbnRlciIsCiAgICAgICAgICAgICAgICBib3JkZXI6ICAgICBzdXBwbGllciA9PT0gcy5uYW1lID8gYDFweCBzb2xpZCAke3MuY29sb3J9YCA6ICIxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpIiwKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHN1cHBsaWVyID09PSBzLm5hbWUgPyBgJHtzLmNvbG9yfTIyYCA6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpIiwKICAgICAgICAgICAgICAgIGNvbG9yOiAgICAgIHN1cHBsaWVyID09PSBzLm5hbWUgPyBzLmNvbG9yIDogIiM3NzgiLCB0cmFuc2l0aW9uOiAiYWxsIDAuMnMiLAogICAgICAgICAgICAgIH19PntzLm5hbWV9PC9idXR0b24+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiDilIDilIAgVGFicyDilIDilIAgKi99CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGdhcDogNCwgbWFyZ2luQm90dG9tOiAxOCwgYmFja2dyb3VuZDogInJnYmEoMjU1LDI1NSwyNTUsMC4wMykiLCBib3JkZXJSYWRpdXM6IDEyLCBwYWRkaW5nOiA0LCB3aWR0aDogImZpdC1jb250ZW50IiwgZmxleFdyYXA6ICJ3cmFwIiB9fT4KICAgICAgICAgIHt0YWJzLm1hcCh0ID0+ICgKICAgICAgICAgICAgPGJ1dHRvbiBrZXk9e3QuaWR9IG9uQ2xpY2s9eygpID0+IHNldFRhYih0LmlkKX0gc3R5bGU9e3sKICAgICAgICAgICAgICBwYWRkaW5nOiAiN3B4IDEzcHgiLCBib3JkZXJSYWRpdXM6IDksIGZvbnRTaXplOiAxMiwgZm9udFdlaWdodDogNjAwLAogICAgICAgICAgICAgIGJvcmRlcjogIm5vbmUiLCBjdXJzb3I6ICJwb2ludGVyIiwgdHJhbnNpdGlvbjogImFsbCAwLjJzIiwKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0YWIgPT09IHQuaWQgPyAicmdiYSgyNTUsMjU1LDI1NSwwLjEpIiA6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgICAgICAgY29sb3I6IHRhYiA9PT0gdC5pZCA/ICIjZmZmIiA6ICIjNjY3IiwKICAgICAgICAgICAgfX0+e3QubGFiZWx9PC9idXR0b24+CiAgICAgICAgICApKX0KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIOKUgOKUgCBDaGFydCDilIDilIAgKi99CiAgICAgICAgeyh0YWIgPT09ICJ0b2RheSIgfHwgdGFiID09PSAidG9tb3Jyb3ciKSAmJiAoCiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJhY2tncm91bmQ6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDIpIiwgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNykiLCBib3JkZXJSYWRpdXM6IDIwLCBwYWRkaW5nOiAiMjBweCA4cHggMTJweCIsIG1hcmdpbkJvdHRvbTogMjAgfX0+CiAgICAgICAgICAgIHtsb2FkaW5nID8gKAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAiY2VudGVyIiwgcGFkZGluZzogIjUwcHggMCIsIGNvbG9yOiAiIzU1NiIgfX0+4pqhIEZldGNoaW5nIHJlYWwgQmVsZ2lhbiBwcmljZXPigKY8L2Rpdj4KICAgICAgICAgICAgKSA6IGVycm9yID8gKAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAiY2VudGVyIiwgcGFkZGluZzogIjQwcHggMCIgfX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGNvbG9yOiAiI0VGNDQ0NCIsIG1hcmdpbkJvdHRvbTogMTIgfX0+e2Vycm9yfTwvZGl2PgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtyZWZldGNofSBzdHlsZT17eyBiYWNrZ3JvdW5kOiAicmdiYSgyMzksNjgsNjgsMC4xNSkiLCBib3JkZXI6ICIxcHggc29saWQgcmdiYSgyMzksNjgsNjgsMC4zKSIsIGNvbG9yOiAiI0VGNDQ0NCIsIGJvcmRlclJhZGl1czogMTAsIHBhZGRpbmc6ICI4cHggMjBweCIsIGN1cnNvcjogInBvaW50ZXIiIH19PlJldHJ5PC9idXR0b24+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkgOiBjaGFydERhdGEubGVuZ3RoID09PSAwID8gKAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAiY2VudGVyIiwgcGFkZGluZzogIjUwcHggMCIsIGNvbG9yOiAiIzU1NiIgfX0+CiAgICAgICAgICAgICAgICB7dGFiID09PSAidG9tb3Jyb3ciID8gIlRvbW9ycm93J3MgcHJpY2VzIHB1Ymxpc2ggYXQgMTM6MDAgQ0VUIiA6ICJObyBkYXRhIn0KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICA8PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nTGVmdDogMTQsIG1hcmdpbkJvdHRvbTogMTQgfX0+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDE1LCBmb250V2VpZ2h0OiA3MDAgfX0+e3RhYiA9PT0gInRvZGF5IiA/ICJUb2RheSdzIiA6ICJUb21vcnJvdydzIn0gSG91cmx5IFByaWNlcyDCtyBCZWxnaXVtPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDExLCBjb2xvcjogIiM1NTYiLCBtYXJnaW5Ub3A6IDIgfX0+RVBFWCBTcG90IMK3IHtsYXN0RmV0Y2hlZCAmJiBgVXBkYXRlZCAke2xhc3RGZXRjaGVkLnRvTG9jYWxlVGltZVN0cmluZygibmwtQkUiKX1gfTwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8UmVzcG9uc2l2ZUNvbnRhaW5lciB3aWR0aD0iMTAwJSIgaGVpZ2h0PXsyODB9PgogICAgICAgICAgICAgICAgICA8QXJlYUNoYXJ0IGRhdGE9e2NoYXJ0RGF0YS5tYXAocCA9PiAoeyAuLi5wLCBwcmljZTogcC5wcmljZV9ldXJfbXdoIH0pKX0gbWFyZ2luPXt7IHRvcDogMTAsIHJpZ2h0OiAyMCwgbGVmdDogMCwgYm90dG9tOiAwIH19PgogICAgICAgICAgICAgICAgICAgIDxkZWZzPgogICAgICAgICAgICAgICAgICAgICAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiB4MT0iMCIgeTE9IjAiIHgyPSIwIiB5Mj0iMSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iNSUiIHN0b3BDb2xvcj0iIzAwQzg5NiIgc3RvcE9wYWNpdHk9ezAuM30gLz4KICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PSI5NSUiIHN0b3BDb2xvcj0iIzAwQzg5NiIgc3RvcE9wYWNpdHk9ezB9IC8+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgICAgICAgICAgICAgIDwvZGVmcz4KICAgICAgICAgICAgICAgICAgICA8Q2FydGVzaWFuR3JpZCBzdHJva2VEYXNoYXJyYXk9IjMgMyIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpIiAvPgogICAgICAgICAgICAgICAgICAgIDxYQXhpcyBkYXRhS2V5PSJob3VyX2xhYmVsIiB0aWNrPXt7IGZpbGw6ICIjNTU2IiwgZm9udFNpemU6IDExIH19IHRpY2tMaW5lPXtmYWxzZX0gaW50ZXJ2YWw9ezJ9IC8+CiAgICAgICAgICAgICAgICAgICAgPFlBeGlzIHRpY2s9e3sgZmlsbDogIiM1NTYiLCBmb250U2l6ZTogMTEgfX0gdGlja0xpbmU9e2ZhbHNlfSBheGlzTGluZT17ZmFsc2V9IHRpY2tGb3JtYXR0ZXI9e3YgPT4gYOKCrCR7dn1gfSBkb21haW49e1siYXV0byIsICJhdXRvIl19IC8+CiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgY29udGVudD17PFByaWNlVG9vbHRpcCBzdXBwbGllcj17c3VwcGxpZXJ9IC8+fSAvPgogICAgICAgICAgICAgICAgICAgIDxSZWZlcmVuY2VMaW5lIHk9ezB9IHN0cm9rZT0icmdiYSgwLDIyOSwyNTUsMC4zKSIgc3Ryb2tlRGFzaGFycmF5PSI0IDQiIC8+CiAgICAgICAgICAgICAgICAgICAgPFJlZmVyZW5jZUxpbmUgeT17YWxlcnRUaHJlc2hvbGR9IHN0cm9rZT0iI0Y1OUUwQiIgc3Ryb2tlRGFzaGFycmF5PSI0IDQiCiAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17eyB2YWx1ZTogIuKaoCBBbGVydCIsIGZpbGw6ICIjRjU5RTBCIiwgZm9udFNpemU6IDEwLCBwb3NpdGlvbjogImluc2lkZVRvcFJpZ2h0IiB9fSAvPgogICAgICAgICAgICAgICAgICAgIHt0YWIgPT09ICJ0b2RheSIgJiYgY3VycmVudCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICA8UmVmZXJlbmNlTGluZSB4PXtgJHtTdHJpbmcoY3VycmVudC5ob3VyID8/IG5ldyBEYXRlKCkuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgIjAiKX06MDBgfQogICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsMC4yNSkiIHN0cm9rZVdpZHRoPXsyfQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17eyB2YWx1ZTogIk5PVyIsIGZpbGw6ICIjZmZmIiwgZm9udFNpemU6IDExLCBwb3NpdGlvbjogInRvcCIgfX0gLz4KICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgIDxBcmVhIHR5cGU9Im1vbm90b25lIiBkYXRhS2V5PSJwcmljZSIgc3Ryb2tlPSIjMDBDODk2IiBzdHJva2VXaWR0aD17Mi41fSBmaWxsPSJ1cmwoI2dyYWQpIgogICAgICAgICAgICAgICAgICAgICAgZG90PXtwcm9wcyA9PiBwcm9wcy5wYXlsb2FkPy5pc19jdXJyZW50CiAgICAgICAgICAgICAgICAgICAgICAgID8gPGNpcmNsZSBrZXk9e3Byb3BzLmtleX0gY3g9e3Byb3BzLmN4fSBjeT17cHJvcHMuY3l9IHI9ezd9IGZpbGw9e2dldFByaWNlQ29sb3IocHJvcHMucGF5bG9hZC5wcmljZV9ldXJfbXdoKX0gc3Ryb2tlPSIjZmZmIiBzdHJva2VXaWR0aD17Mn0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgOiA8ZyBrZXk9e3Byb3BzLmtleX0gLz59CiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVEb3Q9e3sgcjogNiwgZmlsbDogIiMwMEM4OTYiIH19IC8+CiAgICAgICAgICAgICAgICAgIDwvQXJlYUNoYXJ0PgogICAgICAgICAgICAgICAgPC9SZXNwb25zaXZlQ29udGFpbmVyPgogICAgICAgICAgICAgIDwvPgogICAgICAgICAgICApfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgKX0KCiAgICAgICAgey8qIOKUgOKUgCBDaGVhcGVzdCDilIDilIAgKi99CiAgICAgICAge3RhYiA9PT0gImNoZWFwZXN0IiAmJiAoCiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJhY2tncm91bmQ6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDIpIiwgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNykiLCBib3JkZXJSYWRpdXM6IDIwLCBwYWRkaW5nOiAyNCB9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTUsIGZvbnRXZWlnaHQ6IDcwMCwgbWFyZ2luQm90dG9tOiA0IH19PvCfkpogNSBDaGVhcGVzdCBVcGNvbWluZyBIb3VyczwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMywgY29sb3I6ICIjNTU2IiwgbWFyZ2luQm90dG9tOiAyMCB9fT5SdW4geW91ciBFViwgd2FzaGluZyBtYWNoaW5lLCBkaXNod2FzaGVyIGluIHRoZXNlIHdpbmRvd3M8L2Rpdj4KICAgICAgICAgICAge2NoZWFwZXN0Lmxlbmd0aCA9PT0gMAogICAgICAgICAgICAgID8gPGRpdiBzdHlsZT17eyBjb2xvcjogIiM1NTYiLCB0ZXh0QWxpZ246ICJjZW50ZXIiLCBwYWRkaW5nOiAiNDBweCAwIiB9fT5Mb2FkaW5n4oCmPC9kaXY+CiAgICAgICAgICAgICAgOiBjaGVhcGVzdC5tYXAoKGgsIGkpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHRzID0gbmV3IERhdGUoaC50aW1lc3RhbXApOwogICAgICAgICAgICAgICAgY29uc3QgbGJsXyA9IGdldFByaWNlTGFiZWwoaC5wcmljZV9ldXJfbXdoKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpfSBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIsIGFsaWduSXRlbXM6ICJjZW50ZXIiLCBwYWRkaW5nOiAiMTRweCAxNnB4IiwgbWFyZ2luQm90dG9tOiA4LCBiYWNrZ3JvdW5kOiAicmdiYSgwLDIwMCwxNTAsMC4wNCkiLCBib3JkZXI6ICIxcHggc29saWQgcmdiYSgwLDIwMCwxNTAsMC4xNSkiLCBib3JkZXJSYWRpdXM6IDE0IH19PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6IDM0LCBoZWlnaHQ6IDM0LCBib3JkZXJSYWRpdXM6ICI1MCUiLCBiYWNrZ3JvdW5kOiBgcmdiYSgwLDIwMCwxNTAsJHswLjI1IC0gaSAqIDAuMDR9KWAsIGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGp1c3RpZnlDb250ZW50OiAiY2VudGVyIiwgZm9udFNpemU6IDE0LCBmb250V2VpZ2h0OiA5MDAsIGNvbG9yOiAiIzAwQzg5NiIgfX0+e2kgKyAxfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250V2VpZ2h0OiA3MDAsIGZvbnRTaXplOiAxNiB9fT57dHMudG9Mb2NhbGVUaW1lU3RyaW5nKCJubC1CRSIsIHsgaG91cjogIjItZGlnaXQiLCBtaW51dGU6ICIyLWRpZ2l0IiB9KX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTEsIGNvbG9yOiAiIzU1NiIgfX0+e3RzLnRvTG9jYWxlRGF0ZVN0cmluZygibmwtQkUiLCB7IHdlZWtkYXk6ICJzaG9ydCIsIGRheTogIm51bWVyaWMiLCBtb250aDogInNob3J0IiB9KX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAicmlnaHQiIH19PgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBjb2xvcjogZ2V0UHJpY2VDb2xvcihoLnByaWNlX2V1cl9td2gpLCBmb250V2VpZ2h0OiA4MDAsIGZvbnRTaXplOiAxOCwgZm9udEZhbWlseTogIm1vbm9zcGFjZSIgfX0+4oKse2gucHJpY2VfZXVyX213aC50b0ZpeGVkKDEpfS9NV2g8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDExLCBjb2xvcjogIiM2NjciIH19PntsYmxfLmVtb2ppfSB7bGJsXy50ZXh0fTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgICB7c3RhdHM/LnRvZGF5ICYmICgKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTQsIHBhZGRpbmc6ICIxMnB4IDE2cHgiLCBiYWNrZ3JvdW5kOiAicmdiYSgwLDEzMCwyNTUsMC4wNSkiLCBib3JkZXI6ICIxcHggc29saWQgcmdiYSgwLDEzMCwyNTUsMC4xNSkiLCBib3JkZXJSYWRpdXM6IDEyLCBmb250U2l6ZTogMTMsIGNvbG9yOiAiIzc3OCIgfX0+CiAgICAgICAgICAgICAgICDwn5KhIFJ1bm5pbmcgYSAyIGtXIGFwcGxpYW5jZSBhdCBjaGVhcGVzdCB2cyBwZWFrIHNhdmVzeyIgIn0KICAgICAgICAgICAgICAgIDxzdHJvbmcgc3R5bGU9e3sgY29sb3I6ICIjMDBDODk2IiB9fT7igqx7KCgoc3RhdHMudG9kYXkubWF4IC0gc3RhdHMudG9kYXkubWluKSAvIDEwMDApICogMikudG9GaXhlZCgzKX08L3N0cm9uZz4gdG9kYXkKICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgICl9CgogICAgICAgIHsvKiDilIDilIAgQ29tcGFyZSDilIDilIAgKi99CiAgICAgICAge3RhYiA9PT0gImNvbXBhcmUiICYmIG13aCAhPSBudWxsICYmICgKICAgICAgICAgIDxkaXYgc3R5bGU9e3sgYmFja2dyb3VuZDogInJnYmEoMjU1LDI1NSwyNTUsMC4wMikiLCBib3JkZXI6ICIxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA3KSIsIGJvcmRlclJhZGl1czogMjAsIHBhZGRpbmc6IDI0IH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxNSwgZm9udFdlaWdodDogNzAwLCBtYXJnaW5Cb3R0b206IDQgfX0+8J+PoiBTdXBwbGllciBDb21wYXJpc29uPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEzLCBjb2xvcjogIiM1NTYiLCBtYXJnaW5Cb3R0b206IDIwIH19PkF0IGN1cnJlbnQgc3BvdCDigqx7bXdoLnRvRml4ZWQoMSl9L01XaDwvZGl2PgogICAgICAgICAgICA8UmVzcG9uc2l2ZUNvbnRhaW5lciB3aWR0aD0iMTAwJSIgaGVpZ2h0PXsyMDB9PgogICAgICAgICAgICAgIDxCYXJDaGFydCBkYXRhPXtTVVBQTElFUlMubWFwKHMgPT4gKHsgbmFtZTogcy5uYW1lLCBwcmljZTogZ2V0U3VwcGxpZXJQcmljZShtd2ggLyAxMDAwLCBzKSwgY29sb3I6IHMuY29sb3IgfSkpfSBtYXJnaW49e3sgdG9wOiAwLCByaWdodDogMTYsIGxlZnQ6IDAsIGJvdHRvbTogMCB9fT4KICAgICAgICAgICAgICAgIDxDYXJ0ZXNpYW5HcmlkIHN0cm9rZURhc2hhcnJheT0iMyAzIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsMC4wNSkiIHZlcnRpY2FsPXtmYWxzZX0gLz4KICAgICAgICAgICAgICAgIDxYQXhpcyBkYXRhS2V5PSJuYW1lIiB0aWNrPXt7IGZpbGw6ICIjNzc4IiwgZm9udFNpemU6IDExIH19IHRpY2tMaW5lPXtmYWxzZX0gLz4KICAgICAgICAgICAgICAgIDxZQXhpcyB0aWNrPXt7IGZpbGw6ICIjNTU2IiwgZm9udFNpemU6IDEwIH19IHRpY2tMaW5lPXtmYWxzZX0gYXhpc0xpbmU9e2ZhbHNlfSB0aWNrRm9ybWF0dGVyPXt2ID0+IGDigqwke3YudG9GaXhlZCgzKX1gfSBkb21haW49e1siYXV0byIsICJhdXRvIl19IC8+CiAgICAgICAgICAgICAgICA8VG9vbHRpcCBmb3JtYXR0ZXI9e3YgPT4gW2Digqwke3YudG9GaXhlZCg0KX0va1doYCwgIlJldGFpbCJdfSBjb250ZW50U3R5bGU9e3sgYmFja2dyb3VuZDogInJnYmEoOCwxMiwyMiwwLjk3KSIsIGJvcmRlcjogIjFweCBzb2xpZCAjMzM0IiwgYm9yZGVyUmFkaXVzOiAxMCB9fSBsYWJlbFN0eWxlPXt7IGNvbG9yOiAiI2ZmZiIgfX0gLz4KICAgICAgICAgICAgICAgIDxCYXIgZGF0YUtleT0icHJpY2UiIHJhZGl1cz17WzYsIDYsIDAsIDBdfT4KICAgICAgICAgICAgICAgICAge1NVUFBMSUVSUy5tYXAoKHMsIGkpID0+IDxDZWxsIGtleT17aX0gZmlsbD17cy5jb2xvcn0gb3BhY2l0eT17c3VwcGxpZXIgPT09IHMubmFtZSA/IDEgOiAwLjQ1fSAvPil9CiAgICAgICAgICAgICAgICA8L0Jhcj4KICAgICAgICAgICAgICA8L0JhckNoYXJ0PgogICAgICAgICAgICA8L1Jlc3BvbnNpdmVDb250YWluZXI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxNiB9fT4KICAgICAgICAgICAgICB7Wy4uLlNVUFBMSUVSU10uc29ydCgoYSwgYikgPT4gZ2V0U3VwcGxpZXJQcmljZShtd2ggLyAxMDAwLCBhKSAtIGdldFN1cHBsaWVyUHJpY2UobXdoIC8gMTAwMCwgYikpLm1hcCgocywgaSkgPT4gKAogICAgICAgICAgICAgICAgPGRpdiBrZXk9e3MubmFtZX0gb25DbGljaz17KCkgPT4gY2hhbmdlU3VwcGxpZXIocy5uYW1lKX0gc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgcGFkZGluZzogIjEwcHggMTRweCIsIG1hcmdpbkJvdHRvbTogNiwgY3Vyc29yOiAicG9pbnRlciIsIGJvcmRlclJhZGl1czogMTIsIGJhY2tncm91bmQ6IHN1cHBsaWVyID09PSBzLm5hbWUgPyBgJHtzLmNvbG9yfTEyYCA6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDIpIiwgYm9yZGVyOiBgMXB4IHNvbGlkICR7c3VwcGxpZXIgPT09IHMubmFtZSA/IHMuY29sb3IgKyAiNDQiIDogInJnYmEoMjU1LDI1NSwyNTUsMC4wNikifWAgfX0+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZ2FwOiA4IH19PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6IDksIGhlaWdodDogOSwgYm9yZGVyUmFkaXVzOiAiNTAlIiwgYmFja2dyb3VuZDogcy5jb2xvciB9fSAvPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRXZWlnaHQ6IDYwMCwgZm9udFNpemU6IDEzIH19PntzLm5hbWV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIHtpID09PSAwICYmIDxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgY29sb3I6ICIjMDBDODk2IiwgYmFja2dyb3VuZDogInJnYmEoMCwyMDAsMTUwLDAuMSkiLCBwYWRkaW5nOiAiMnB4IDdweCIsIGJvcmRlclJhZGl1czogOCB9fT5DaGVhcGVzdDwvc3Bhbj59CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiAibW9ub3NwYWNlIiwgY29sb3I6IHMuY29sb3IsIGZvbnRXZWlnaHQ6IDcwMCwgZm9udFNpemU6IDEzIH19PuKCrHtnZXRTdXBwbGllclByaWNlKG13aCAvIDEwMDAsIHMpLnRvRml4ZWQoNCl9L2tXaDwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICkpfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICl9CgogICAgICAgIHsvKiDilIDilIAgQWxlcnRzIOKUgOKUgCAqL30KICAgICAgICB7dGFiID09PSAiYWxlcnRzIiAmJiAoCiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJhY2tncm91bmQ6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDIpIiwgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNykiLCBib3JkZXJSYWRpdXM6IDIwLCBwYWRkaW5nOiAyNCB9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTUsIGZvbnRXZWlnaHQ6IDcwMCwgbWFyZ2luQm90dG9tOiA0IH19PvCflJQgUHJpY2UgQWxlcnRzPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEzLCBjb2xvcjogIiM1NTYiLCBtYXJnaW5Cb3R0b206IDIyIH19PlByZWZlcmVuY2VzIHNhdmVkIHRvIHlvdXIgYWNjb3VudCBhdXRvbWF0aWNhbGx5PC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAyNCB9fT4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMywgY29sb3I6ICIjYWFhIiwgbWFyZ2luQm90dG9tOiAxMCB9fT4KICAgICAgICAgICAgICAgIEFsZXJ0IHdoZW4gcHJpY2UgYmVsb3c6IDxzdHJvbmcgc3R5bGU9e3sgY29sb3I6ICIjRjU5RTBCIiB9fT7igqx7YWxlcnRUaHJlc2hvbGR9L01XaDwvc3Ryb25nPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPXstMjB9IG1heD17MjAwfSBzdGVwPXs1fSB2YWx1ZT17YWxlcnRUaHJlc2hvbGR9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzYXZlQWxlcnRUaHJlc2hvbGQoK2UudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAiMTAwJSIsIGFjY2VudENvbG9yOiAiI0Y1OUUwQiIsIGN1cnNvcjogInBvaW50ZXIiIH19IC8+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIsIGZvbnRTaXplOiAxMSwgY29sb3I6ICIjNDQ1IiwgbWFyZ2luVG9wOiA0IH19PgogICAgICAgICAgICAgICAgPHNwYW4+4oKsLTIwPC9zcGFuPjxzcGFuPuKCrDIwMC9NV2g8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwganVzdGlmeUNvbnRlbnQ6ICJzcGFjZS1iZXR3ZWVuIiwgYWxpZ25JdGVtczogImNlbnRlciIsIHBhZGRpbmc6ICIxNHB4IDE2cHgiLCBiYWNrZ3JvdW5kOiBhbGVydEFjdGl2ZSA/ICJyZ2JhKDAsMjAwLDE1MCwwLjA4KSIgOiAicmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIsIGJvcmRlcjogYDFweCBzb2xpZCAke2FsZXJ0QWN0aXZlID8gInJnYmEoMCwyMDAsMTUwLDAuMykiIDogInJnYmEoMjU1LDI1NSwyNTUsMC4wOCkifWAsIGJvcmRlclJhZGl1czogMTQgfX0+CiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFdlaWdodDogNjAwLCBmb250U2l6ZTogMTQgfX0+QWxlcnQge2FsZXJ0QWN0aXZlID8gIvCfn6IgQWN0aXZlIiA6ICLimqsgSW5hY3RpdmUifTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTIsIGNvbG9yOiAiIzY2NyIsIG1hcmdpblRvcDogMiB9fT5TYXZlZCB0byB5b3VyIGFjY291bnQ8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZUFsZXJ0fSBzdHlsZT17eyBwYWRkaW5nOiAiOHB4IDIwcHgiLCBib3JkZXJSYWRpdXM6IDMwLCBmb250V2VpZ2h0OiA3MDAsIGZvbnRTaXplOiAxMywgYm9yZGVyOiAibm9uZSIsIGN1cnNvcjogInBvaW50ZXIiLCBiYWNrZ3JvdW5kOiBhbGVydEFjdGl2ZSA/ICJyZ2JhKDIzOSw2OCw2OCwwLjIpIiA6ICJyZ2JhKDAsMjAwLDE1MCwwLjIpIiwgY29sb3I6IGFsZXJ0QWN0aXZlID8gIiNFRjQ0NDQiIDogIiMwMEM4OTYiIH19PgogICAgICAgICAgICAgICAge2FsZXJ0QWN0aXZlID8gIkRpc2FibGUiIDogIkVuYWJsZSJ9CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgKX0KCiAgICAgICAgey8qIEZvb3RlciAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMjAsIGRpc3BsYXk6ICJmbGV4IiwganVzdGlmeUNvbnRlbnQ6ICJzcGFjZS1iZXR3ZWVuIiwgZmxleFdyYXA6ICJ3cmFwIiwgZ2FwOiA4LCBmb250U2l6ZTogMTEsIGNvbG9yOiAiIzMzNCIgfX0+CiAgICAgICAgICA8c3Bhbj5EYXRhOiBFbmVyZ3ktQ2hhcnRzLmluZm8gwrcgRWxpYSBPcGVuIERhdGEgKENDIEJZIDQuMCkgwrcgRU5UU08tRTwvc3Bhbj4KICAgICAgICAgIDxzcGFuPlByaWNlcyByZWZyZXNoIGV2ZXJ5IDE1IG1pbiDCtyBOb3QgZmluYW5jaWFsIGFkdmljZTwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxzdHlsZT57YCogeyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9IGEgeyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH0gYnV0dG9uIHsgZm9udC1mYW1pbHk6IGluaGVyaXQ7IH1gfTwvc3R5bGU+CiAgICA8L2Rpdj4KICApOwp9Cg=="
WriteB64 "frontend\src\pages\ProfilePage.jsx" "LyoqCiAqIHBhZ2VzL1Byb2ZpbGVQYWdlLmpzeAogKiBVc2VyIHByb2ZpbGU6IHByZWZlcmVuY2VzLCBhbGVydHMsIGxpbmtlZCBzZXJ2aWNlcwogKi8KCmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAicmVhY3QiOwppbXBvcnQgeyB1c2VBdXRoIH0gIGZyb20gIi4uL2NvbnRleHQvQXV0aENvbnRleHQiOwppbXBvcnQgeyBTVVBQTElFUlMgfSBmcm9tICIuLi91dGlscy9wcmljZVV0aWxzIjsKCmNvbnN0IEMgPSB7CiAgbmF2eTogICIjMEQxQjNFIiwgYmx1ZTogIiMxQTU2QTQiLCB0ZWFsOiAiIzBEOTQ4OCIsCiAgd2hpdGU6ICIjRkZGRkZGIiwgZ3JlZW46ICIjMDU5NjY5IiwgcmVkOiAiI0RDMjYyNiIsIGFtYmVyOiAiI0Y1OUUwQiIsCiAgZ3JheTogICIjNjQ3NDhCIiwgY2FyZDogInJnYmEoMjU1LDI1NSwyNTUsMC4wMykiLAp9OwoKZnVuY3Rpb24gU2VjdGlvbih7IHRpdGxlLCBjaGlsZHJlbiB9KSB7CiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3sKICAgICAgYmFja2dyb3VuZDogQy5jYXJkLCBib3JkZXI6ICIxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA3KSIsCiAgICAgIGJvcmRlclJhZGl1czogMTgsIHBhZGRpbmc6IDI0LCBtYXJnaW5Cb3R0b206IDIwLAogICAgfX0+CiAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDE1LCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBDLndoaXRlLCBtYXJnaW5Cb3R0b206IDIwIH19Pnt0aXRsZX08L2Rpdj4KICAgICAge2NoaWxkcmVufQogICAgPC9kaXY+CiAgKTsKfQoKZnVuY3Rpb24gU2F2ZUJ1dHRvbih7IG9uQ2xpY2ssIGxvYWRpbmcsIHNhdmVkIH0pIHsKICByZXR1cm4gKAogICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsaWNrfSBkaXNhYmxlZD17bG9hZGluZ30gc3R5bGU9e3sKICAgICAgbWFyZ2luVG9wOiAyMCwgcGFkZGluZzogIjEwcHggMjhweCIsIGJvcmRlclJhZGl1czogMTAsIGZvbnRTaXplOiAxNCwKICAgICAgZm9udFdlaWdodDogNzAwLCBib3JkZXI6ICJub25lIiwgY3Vyc29yOiAicG9pbnRlciIsCiAgICAgIGJhY2tncm91bmQ6IHNhdmVkID8gQy5ncmVlbiA6IEMudGVhbCwgY29sb3I6IEMud2hpdGUsIHRyYW5zaXRpb246ICJhbGwgMC4zcyIsCiAgICB9fT4KICAgICAge2xvYWRpbmcgPyAiU2F2aW5n4oCmIiA6IHNhdmVkID8gIuKchSBTYXZlZCEiIDogIlNhdmUgQ2hhbmdlcyJ9CiAgICA8L2J1dHRvbj4KICApOwp9CgpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9maWxlUGFnZSh7IG9uQmFjayB9KSB7CiAgY29uc3QgeyB1c2VyLCBsb2dvdXQsIHVwZGF0ZVByZWZlcmVuY2VzIH0gPSB1c2VBdXRoKCk7CiAgY29uc3QgcHJlZnMgPSB1c2VyPy5wcmVmZXJlbmNlcyB8fCB7fTsKCiAgY29uc3QgW3N1cHBsaWVyLCAgIHNldFN1cHBsaWVyXSAgID0gdXNlU3RhdGUocHJlZnMuc3VwcGxpZXIgfHwgIkJvbHQgRW5lcmd5Iik7CiAgY29uc3QgW3RocmVzaG9sZCwgIHNldFRocmVzaG9sZF0gID0gdXNlU3RhdGUocHJlZnMuYWxlcnRUaHJlc2hvbGQgfHwgODApOwogIGNvbnN0IFthbGVydE9uLCAgICBzZXRBbGVydE9uXSAgICA9IHVzZVN0YXRlKHByZWZzLmFsZXJ0RW5hYmxlZCB8fCBmYWxzZSk7CiAgY29uc3QgW3NhdmluZywgICAgIHNldFNhdmluZ10gICAgID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtzYXZlZCwgICAgICBzZXRTYXZlZF0gICAgICA9IHVzZVN0YXRlKGZhbHNlKTsKCiAgY29uc3Qgc2F2ZSA9IGFzeW5jICgpID0+IHsKICAgIHNldFNhdmluZyh0cnVlKTsKICAgIHRyeSB7CiAgICAgIGF3YWl0IHVwZGF0ZVByZWZlcmVuY2VzKHsgc3VwcGxpZXIsIGFsZXJ0VGhyZXNob2xkOiB0aHJlc2hvbGQsIGFsZXJ0RW5hYmxlZDogYWxlcnRPbiB9KTsKICAgICAgc2V0U2F2ZWQodHJ1ZSk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0U2F2ZWQoZmFsc2UpLCAyNTAwKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgIH0gZmluYWxseSB7CiAgICAgIHNldFNhdmluZyhmYWxzZSk7CiAgICB9CiAgfTsKCiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3sKICAgICAgbWluSGVpZ2h0OiAiMTAwdmgiLAogICAgICBiYWNrZ3JvdW5kOiAicmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgYXQgMjAlIDIwJSwgIzBBMTYyOCAwJSwgIzA2MEIxNCA2MCUsICMwQTBGMUEgMTAwJSkiLAogICAgICBmb250RmFtaWx5OiAiJ0RNIFNhbnMnLCBzeXN0ZW0tdWksIHNhbnMtc2VyaWYiLAogICAgICBjb2xvcjogQy53aGl0ZSwgcGFkZGluZzogIjI4cHggMThweCIsCiAgICB9fT4KICAgICAgPGRpdiBzdHlsZT17eyBtYXhXaWR0aDogNjQwLCBtYXJnaW46ICIwIGF1dG8iIH19PgoKICAgICAgICB7LyogSGVhZGVyICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZ2FwOiAxNCwgbWFyZ2luQm90dG9tOiAzMiB9fT4KICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25CYWNrfSBzdHlsZT17ewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgyNTUsMjU1LDI1NSwwLjA2KSIsIGJvcmRlcjogIjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMSkiLAogICAgICAgICAgICBib3JkZXJSYWRpdXM6IDEwLCBwYWRkaW5nOiAiOHB4IDE0cHgiLCBjb2xvcjogQy53aGl0ZSwKICAgICAgICAgICAgZm9udFNpemU6IDEzLCBjdXJzb3I6ICJwb2ludGVyIiwgZm9udFdlaWdodDogNjAwLAogICAgICAgICAgfX0+4oaQIEJhY2s8L2J1dHRvbj4KICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDIwLCBmb250V2VpZ2h0OiA4MDAgfX0+TXkgUHJvZmlsZTwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMywgY29sb3I6IEMuZ3JheSB9fT57dXNlcj8uZW1haWx9PC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIEFjY291bnQgaW5mbyAqL30KICAgICAgICA8U2VjdGlvbiB0aXRsZT0i8J+RpCBBY2NvdW50Ij4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBnYXA6IDI0LCBmbGV4V3JhcDogIndyYXAiIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZsZXg6IDEsIG1pbldpZHRoOiAxODAgfX0+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTEsIGNvbG9yOiBDLmdyYXksIG1hcmdpbkJvdHRvbTogNCwgdGV4dFRyYW5zZm9ybTogInVwcGVyY2FzZSIsIGxldHRlclNwYWNpbmc6ICIwLjVweCIgfX0+TmFtZTwvZGl2PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDE2LCBmb250V2VpZ2h0OiA2MDAgfX0+e3VzZXI/Lm5hbWUgfHwgIuKAlCJ9PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZsZXg6IDIsIG1pbldpZHRoOiAyMDAgfX0+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTEsIGNvbG9yOiBDLmdyYXksIG1hcmdpbkJvdHRvbTogNCwgdGV4dFRyYW5zZm9ybTogInVwcGVyY2FzZSIsIGxldHRlclNwYWNpbmc6ICIwLjVweCIgfX0+RW1haWw8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxNiwgZm9udFdlaWdodDogNjAwIH19Pnt1c2VyPy5lbWFpbH08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxNiwgZGlzcGxheTogImZsZXgiLCBnYXA6IDEwLCBmbGV4V3JhcDogIndyYXAiIH19PgogICAgICAgICAgICB7WwogICAgICAgICAgICAgIHsgaWNvbjogIvCflLUiLCBsYWJlbDogIml0c21lIiwgIGFjdGl2ZTogdXNlcj8ucHJvdmlkZXJzPy5pdHNtZSwgIHBoYXNlOiAiUGhhc2UgMyIgfSwKICAgICAgICAgICAgICB7IGljb246ICLwn5S0IiwgbGFiZWw6ICJHb29nbGUiLCBhY3RpdmU6IHVzZXI/LnByb3ZpZGVycz8uZ29vZ2xlLCBwaGFzZTogIlBoYXNlIDIiIH0sCiAgICAgICAgICAgICAgeyBpY29uOiAi4pqrIiwgbGFiZWw6ICJBcHBsZSIsICBhY3RpdmU6IHVzZXI/LnByb3ZpZGVycz8uYXBwbGUsICBwaGFzZTogIlBoYXNlIDIiIH0sCiAgICAgICAgICAgIF0ubWFwKHAgPT4gKAogICAgICAgICAgICAgIDxkaXYga2V5PXtwLmxhYmVsfSBzdHlsZT17ewogICAgICAgICAgICAgICAgcGFkZGluZzogIjhweCAxNHB4IiwgYm9yZGVyUmFkaXVzOiAxMCwgZm9udFNpemU6IDEyLAogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcC5hY3RpdmUgPyAicmdiYSg1LDE1MCwxMDUsMC4xKSIgOiAicmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIsCiAgICAgICAgICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHtwLmFjdGl2ZSA/ICJyZ2JhKDUsMTUwLDEwNSwwLjMpIiA6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDgpIn1gLAogICAgICAgICAgICAgICAgY29sb3I6IHAuYWN0aXZlID8gQy5ncmVlbiA6IEMuZ3JheSwKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGdhcDogNiwKICAgICAgICAgICAgICB9fT4KICAgICAgICAgICAgICAgIHtwLmljb259IHtwLmxhYmVsfQogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgb3BhY2l0eTogMC42IH19PsK3IHtwLmFjdGl2ZSA/ICJDb25uZWN0ZWQiIDogcC5waGFzZX08L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9TZWN0aW9uPgoKICAgICAgICB7LyogU3VwcGxpZXIgcHJlZmVyZW5jZSAqL30KICAgICAgICA8U2VjdGlvbiB0aXRsZT0i4pqhIEVsZWN0cmljaXR5IFN1cHBsaWVyIj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEzLCBjb2xvcjogQy5ncmF5LCBtYXJnaW5Cb3R0b206IDE2IH19PgogICAgICAgICAgICBZb3VyIHN1cHBsaWVyIOKAlCBwcmljZXMgb24gdGhlIGRhc2hib2FyZCB3aWxsIGluY2x1ZGUgdGhlaXIgdGFyaWZmIGZvcm11bGEKICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGdhcDogOCwgZmxleFdyYXA6ICJ3cmFwIiB9fT4KICAgICAgICAgICAge1NVUFBMSUVSUy5tYXAocyA9PiAoCiAgICAgICAgICAgICAgPGJ1dHRvbiBrZXk9e3MubmFtZX0gb25DbGljaz17KCkgPT4gc2V0U3VwcGxpZXIocy5uYW1lKX0gc3R5bGU9e3sKICAgICAgICAgICAgICAgIHBhZGRpbmc6ICI4cHggMTZweCIsIGJvcmRlclJhZGl1czogMzAsIGZvbnRTaXplOiAxMywgZm9udFdlaWdodDogNjAwLCBjdXJzb3I6ICJwb2ludGVyIiwKICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICBzdXBwbGllciA9PT0gcy5uYW1lID8gYDFweCBzb2xpZCAke3MuY29sb3J9YCA6ICIxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpIiwKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICBzdXBwbGllciA9PT0gcy5uYW1lID8gYCR7cy5jb2xvcn0yMmAgOiAicmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIsCiAgICAgICAgICAgICAgICBjb2xvcjogICAgICAgc3VwcGxpZXIgPT09IHMubmFtZSA/IHMuY29sb3IgOiBDLmdyYXksCiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAiYWxsIDAuMnMiLAogICAgICAgICAgICAgIH19PntzLm5hbWV9PC9idXR0b24+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9TZWN0aW9uPgoKICAgICAgICB7LyogUHJpY2UgYWxlcnRzICovfQogICAgICAgIDxTZWN0aW9uIHRpdGxlPSLwn5SUIFByaWNlIEFsZXJ0cyI+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwganVzdGlmeUNvbnRlbnQ6ICJzcGFjZS1iZXR3ZWVuIiwgYWxpZ25JdGVtczogImNlbnRlciIsIG1hcmdpbkJvdHRvbTogMjAgfX0+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTQsIGZvbnRXZWlnaHQ6IDYwMCB9fT5BbGVydCBtZSB3aGVuIHByaWNlIGRyb3BzIGJlbG93IHRocmVzaG9sZDwvZGl2PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEyLCBjb2xvcjogQy5ncmF5LCBtYXJnaW5Ub3A6IDMgfX0+CiAgICAgICAgICAgICAgICBJbi1hcHAgYmFubmVyIG5vdyDCtyBQdXNoIG5vdGlmaWNhdGlvbnMgaW4gUGhhc2UgMgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRBbGVydE9uKGEgPT4gIWEpfSBzdHlsZT17ewogICAgICAgICAgICAgIHBhZGRpbmc6ICI4cHggMjBweCIsIGJvcmRlclJhZGl1czogMzAsIGZvbnRXZWlnaHQ6IDcwMCwgZm9udFNpemU6IDEzLAogICAgICAgICAgICAgIGJvcmRlcjogIm5vbmUiLCBjdXJzb3I6ICJwb2ludGVyIiwKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBhbGVydE9uID8gInJnYmEoNSwxNTAsMTA1LDAuMikiIDogInJnYmEoMjU1LDI1NSwyNTUsMC4wNikiLAogICAgICAgICAgICAgIGNvbG9yOiBhbGVydE9uID8gQy5ncmVlbiA6IEMuZ3JheSwKICAgICAgICAgICAgfX0+CiAgICAgICAgICAgICAge2FsZXJ0T24gPyAi8J+foiBPbiIgOiAi4pqrIE9mZiJ9CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMywgY29sb3I6ICIjYWFhIiwgbWFyZ2luQm90dG9tOiAxMCB9fT4KICAgICAgICAgICAgVGhyZXNob2xkOiA8c3Ryb25nIHN0eWxlPXt7IGNvbG9yOiBDLmFtYmVyIH19PuKCrHt0aHJlc2hvbGR9L01XaDwvc3Ryb25nPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj17LTIwfSBtYXg9ezIwMH0gc3RlcD17NX0gdmFsdWU9e3RocmVzaG9sZH0KICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0VGhyZXNob2xkKCtlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAiMTAwJSIsIGFjY2VudENvbG9yOiBDLmFtYmVyLCBjdXJzb3I6ICJwb2ludGVyIiB9fSAvPgogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIsIGZvbnRTaXplOiAxMSwgY29sb3I6ICIjNDQ1IiwgbWFyZ2luVG9wOiA0IH19PgogICAgICAgICAgICA8c3Bhbj7igqwtMjAgKG5lZ2F0aXZlKTwvc3Bhbj48c3Bhbj7igqwyMDAgKHBlYWspPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9TZWN0aW9uPgoKICAgICAgICB7LyogRmx1dml1cyAqL30KICAgICAgICA8U2VjdGlvbiB0aXRsZT0i8J+PoCBGbHV2aXVzIFNtYXJ0IE1ldGVyIj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiB9fT4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxNCwgZm9udFdlaWdodDogNjAwIH19PkxpbmsgeW91ciBkaWdpdGFsIG1ldGVyPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTIsIGNvbG9yOiBDLmdyYXksIG1hcmdpblRvcDogNCB9fT4KICAgICAgICAgICAgICAgIFJlcXVpcmVzIGl0c21lIGxvZ2luIMK3IEF2YWlsYWJsZSBpbiBQaGFzZSAzCiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7CiAgICAgICAgICAgICAgcGFkZGluZzogIjhweCAxNnB4IiwgYm9yZGVyUmFkaXVzOiAxMCwgZm9udFNpemU6IDEyLAogICAgICAgICAgICAgIGJhY2tncm91bmQ6ICJyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpIiwgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wOCkiLAogICAgICAgICAgICAgIGNvbG9yOiBDLmdyYXksCiAgICAgICAgICAgIH19PgogICAgICAgICAgICAgIFBoYXNlIDMKICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L1NlY3Rpb24+CgogICAgICAgIHsvKiBTYXZlICsgbG9nb3V0ICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZmxleFdyYXA6ICJ3cmFwIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgIDxTYXZlQnV0dG9uIG9uQ2xpY2s9e3NhdmV9IGxvYWRpbmc9e3NhdmluZ30gc2F2ZWQ9e3NhdmVkfSAvPgogICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtsb2dvdXR9IHN0eWxlPXt7CiAgICAgICAgICAgIHBhZGRpbmc6ICIxMHB4IDI0cHgiLCBib3JkZXJSYWRpdXM6IDEwLCBmb250U2l6ZTogMTQsIGZvbnRXZWlnaHQ6IDYwMCwKICAgICAgICAgICAgYm9yZGVyOiAiMXB4IHNvbGlkIHJnYmEoMjM5LDY4LDY4LDAuMykiLCBiYWNrZ3JvdW5kOiAicmdiYSgyMzksNjgsNjgsMC4wOCkiLAogICAgICAgICAgICBjb2xvcjogQy5yZWQsIGN1cnNvcjogInBvaW50ZXIiLAogICAgICAgICAgfX0+CiAgICAgICAgICAgIFNpZ24gT3V0CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfQo="
WriteB64 "frontend\src\utils\priceUtils.js" "Ly8gdXRpbHMvcHJpY2VVdGlscy5qcwoKZXhwb3J0IGNvbnN0IFNVUFBMSUVSUyA9IFsKICB7IG5hbWU6ICdCb2x0IEVuZXJneScsICAgICBjb2xvcjogJyMwMEM4OTYnLCBtYXJnaW46IDEuMDgsIGZpeGVkOiAwLjAzMSB9LAogIHsgbmFtZTogJ0VuZ2llJywgICAgICAgICAgIGNvbG9yOiAnIzAwNjZDQycsIG1hcmdpbjogMS4xMiwgZml4ZWQ6IDAuMDM4IH0sCiAgeyBuYW1lOiAnVG90YWxFbmVyZ2llcycsICAgY29sb3I6ICcjQ0MyMjAwJywgbWFyZ2luOiAxLjEwLCBmaXhlZDogMC4wMzUgfSwKICB7IG5hbWU6ICdFREYgTHVtaW51cycsICAgICBjb2xvcjogJyNGRjZCMDAnLCBtYXJnaW46IDEuMDksIGZpeGVkOiAwLjAyOSB9LAogIHsgbmFtZTogJ0xhbXBpcmlzJywgICAgICAgIGNvbG9yOiAnIzlCNTlCNicsIG1hcmdpbjogMS4xMSwgZml4ZWQ6IDAuMDMzIH0sCl0KCmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBwbGllclByaWNlKHNwb3RLd2gsIHN1cHBsaWVyKSB7CiAgcmV0dXJuICsoc3BvdEt3aCAqIHN1cHBsaWVyLm1hcmdpbiArIHN1cHBsaWVyLmZpeGVkKS50b0ZpeGVkKDQpCn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRQcmljZUNvbG9yKHByaWNlTXdoKSB7CiAgaWYgKHByaWNlTXdoIDwgMCkgICAgcmV0dXJuICcjMDBFNUZGJwogIGlmIChwcmljZU13aCA8IDUwKSAgIHJldHVybiAnIzAwQzg5NicKICBpZiAocHJpY2VNd2ggPCA5MCkgICByZXR1cm4gJyM4NENDMTYnCiAgaWYgKHByaWNlTXdoIDwgMTMwKSAgcmV0dXJuICcjRjU5RTBCJwogIGlmIChwcmljZU13aCA8IDE2MCkgIHJldHVybiAnI0Y5NzMxNicKICByZXR1cm4gJyNFRjQ0NDQnCn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRQcmljZUxhYmVsKHByaWNlTXdoKSB7CiAgaWYgKHByaWNlTXdoIDwgMCkgICAgcmV0dXJuIHsgdGV4dDogJ05lZ2F0aXZlIHByaWNlIScsIGVtb2ppOiAn4pqhJywgdGlwOiAnR3JpZCBpcyBvdmVybG9hZGVkIOKAlCBydW4gZXZlcnl0aGluZyBub3chJyB9CiAgaWYgKHByaWNlTXdoIDwgNTApICAgcmV0dXJuIHsgdGV4dDogJ1ZlcnkgY2hlYXAnLCAgICAgICBlbW9qaTogJ/Cfn6InLCB0aXA6ICdHcmVhdCB0aW1lIGZvciBoaWdoIGNvbnN1bXB0aW9uJyB9CiAgaWYgKHByaWNlTXdoIDwgOTApICAgcmV0dXJuIHsgdGV4dDogJ0NoZWFwJywgICAgICAgICAgICBlbW9qaTogJ/Cfn6EnLCB0aXA6ICdHb29kIHRpbWUgZm9yIGxhdW5kcnksIEVWIGNoYXJnaW5nJyB9CiAgaWYgKHByaWNlTXdoIDwgMTMwKSAgcmV0dXJuIHsgdGV4dDogJ01vZGVyYXRlJywgICAgICAgICBlbW9qaTogJ/Cfn6AnLCB0aXA6ICdBdm9pZCBoaWdoIGxvYWRzIGlmIHBvc3NpYmxlJyB9CiAgaWYgKHByaWNlTXdoIDwgMTYwKSAgcmV0dXJuIHsgdGV4dDogJ0V4cGVuc2l2ZScsICAgICAgICBlbW9qaTogJ/CflLQnLCB0aXA6ICdQb3N0cG9uZSBoaWdoIGNvbnN1bXB0aW9uJyB9CiAgcmV0dXJuICAgICAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiAnUGVhayBwcmljZScsICAgICAgZW1vamk6ICfwn5qoJywgdGlwOiAnQXZvaWQgdXNpbmcgbGFyZ2UgYXBwbGlhbmNlcyEnIH0KfQoKZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFByaWNlKHByaWNlTXdoLCB1bml0ID0gJ01XaCcpIHsKICBpZiAodW5pdCA9PT0gJ01XaCcpIHJldHVybiBg4oKsJHtwcmljZU13aD8udG9GaXhlZCgxKSA/PyAnLS0nfS9NV2hgCiAgcmV0dXJuIGDigqwkeyhwcmljZU13aCAvIDEwMDApPy50b0ZpeGVkKDQpID8/ICctLSd9L2tXaGAKfQo="
WriteB64 "frontend\vite.config.js" "aW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZScKaW1wb3J0IHJlYWN0IGZyb20gJ0B2aXRlanMvcGx1Z2luLXJlYWN0JwoKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHsKICBwbHVnaW5zOiBbcmVhY3QoKV0sCiAgc2VydmVyOiB7CiAgICBwb3J0OiA1MTczLAogICAgcHJveHk6IHsKICAgICAgLy8gSW4gZGV2LCBwcm94eSAvYXBpIHJlcXVlc3RzIHRvIGJhY2tlbmQKICAgICAgJy9hcGknOiB7CiAgICAgICAgdGFyZ2V0OiAnaHR0cDovL2xvY2FsaG9zdDozMDAxJywKICAgICAgICBjaGFuZ2VPcmlnaW46IHRydWUsCiAgICAgIH0KICAgIH0KICB9Cn0pCg=="

# Restore ENTSOE key if it was set
if ($existingEntsoe -and $existingEntsoe -ne '') {
  $env = Get-Content 'backend\.env' -Raw
  $env = $env -replace 'ENTSOE_API_KEY=', "ENTSOE_API_KEY=$existingEntsoe"
  [System.IO.File]::WriteAllText((Join-Path (Get-Location).Path 'backend\.env'), $env)
  Write-Host "  Restored ENTSOE_API_KEY" -ForegroundColor Cyan
}

Write-Host ""
Write-Host "Installing backend dependencies..." -ForegroundColor Yellow
Push-Location backend
npm install
Pop-Location

Write-Host "Installing frontend dependencies..." -ForegroundColor Yellow
Push-Location frontend
npm install
Pop-Location

Write-Host ""
Write-Host "=========================================" -ForegroundColor Green
Write-Host "  Done! Start with:" -ForegroundColor Green
Write-Host ""
Write-Host "  Terminal 1: cd backend  && npm run dev" -ForegroundColor Cyan
Write-Host "  Terminal 2: cd frontend && npm run dev" -ForegroundColor Cyan
Write-Host ""
Write-Host "  Open: http://localhost:5173" -ForegroundColor White
Write-Host "=========================================" -ForegroundColor Green